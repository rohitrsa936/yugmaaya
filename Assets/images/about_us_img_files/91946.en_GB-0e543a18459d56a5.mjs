(self.modernJsonp=self.modernJsonp||[]).push([["91946"],{584463(e,o,a){a.d(o,{A:()=>l});var r=a(449798),t=a(398304),i=a(755701);let l=()=>{let e=(0,r.A)(),o=(0,t.A)();return(0,i.H7)(e,o)}},215185(e,o,a){a.d(o,{A:()=>x});var r=a(97407),t=a(296540),i=a(671468),l=a(328138),s=a(645519),n=a(449798),d=a(643357),c=a(998753),h=a(755701),_=a(241342),m=a(195007),b=a(396526),g=a(699203),u=a(474848);function p(e,o,a){var r;return(o="symbol"==typeof(r=function(e,o){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,o||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(o,"string"))?r:r+"")in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}class C extends t.Component{constructor(...e){super(...e),p(this,"handleSubmit",e=>{let{advertiserId:o,boardCreateSource:a,createBoard:r,onBoardCreate:t,viewer:i,orbacActingAs:l,shouldShowAddCollaborators:s,handleInviteSelectedCollaborators:n}=this.props,d=(0,h.H7)(i,l),{name:c,description:_,privacy:m,collab_board_email:b,collaborator_invites_enabled:g}=e;return r({boardCreateOptions:{name:c,description:_,privacy:m,collab_board_email:b,collaborator_invites_enabled:g,aux_data:{source:a},...o?{advertiser_id:o}:{},...d?{orbac_subject_id:d}:Object.freeze({})}}).then(e=>{s&&n(e.id),t(e)})}),p(this,"emptyBoardData",{collab_board_email:!0,collaborator_invites_enabled:!1,id:"",is_collaborative:!1,name:this.props.suggestedBoardName||"",description:"",category:"other",owner:{username:(0,h.TO)(this.props.viewer,this.props.orbacActingAs)},pin_count:0})}render(){let{advertiserId:e,isAdAccountOwner:o,i18n:a,onClose:r,privacy:t,useModalWithNoLayer:i,showSecretBoardCreateToggle:n,shouldShowAddCollaborators:d,setSelectedContacts:c,selectedContacts:_,orbacActingAs:b,viewer:g}=this.props,p=(0,h.H7)(g,b),C=a.bt("Create board", "Create board", "BoardCreate.BoardCreate", undefined, true);return(0,u.jsx)(m.A,{board:{...this.emptyBoardData,...{privacy:o?t:s.A.BoardPrivacy.PROTECTED},name:this.props.suggestedBoardName??""},currentUserIsOwner:!0,isAdAccount:!!e,isAdAccountOwner:o,isDeletable:!1,isEditable:!0,isNameAndSecretView:!0,isProfilePublisher:!!p,onClose:r,onSubmit:this.handleSubmit,selectedContacts:_,setSelectedContacts:c,shouldShowAddCollaborators:d,showSecretBoardCreateToggle:n,submitText:this.props.i18n.bt("Create", "Create", " - ", undefined, true),title:(0,u.jsx)(l.az,{paddingY:8,width:"100%",children:(0,u.jsx)(l._Y,{align:"center",size:"600",children:C})}),useModalWithNoLayer:i})}}function x(e){(0,t.useEffect)(()=>{(0,r.A)("BoardCreate","/app/www/BoardCreate/BoardCreate.tsx")},[]);let o=(0,g.A)(),a=(0,d.A)(),l=(0,n.A)(),s=(0,i.d4)(({advertiser:e})=>e?e.id:void 0),h=(0,c.A)(),m=(0,i.d4)(({advertiser:e})=>!e||l.isAuth&&e.owner_user_id===l.id),p=(0,b.mV)(),x=(0,b.lt)(),[v,A]=(0,t.useState)([]),{suggestedBoardName:f,completeExperience:B,dismissExperience:j}=(0,_.A)(1000673,e.hasSuggestedBoardNameExperience&&void 0===e.suggestedBoardName||!1);return(0,u.jsx)(C,{...e,advertiserId:s,createBoard:o,dispatch:(0,i.wA)(),handleInviteSelectedCollaborators:e=>{let o=v.filter(e=>"email"===e.type||"email_share_suggestion"===e.type),a=v.filter(e=>"user"===e.type||"user_share_suggestion"===e.type);a.length>0&&x(e,a.map(e=>e.id)),o.length>0&&p(e,o.map(e=>e.id))},i18n:a,isAdAccountOwner:m,onBoardCreate:o=>{e.hasSuggestedBoardNameExperience&&(o.name===f?B():j()),e.onBoardCreate(o)},onClose:()=>{e.hasSuggestedBoardNameExperience&&j(),e.onClose()},orbacActingAs:h,selectedContacts:v,setSelectedContacts:A,suggestedBoardName:e.suggestedBoardName??f,viewer:l})}p(C,"defaultProps",{privacy:s.A.BoardPrivacy.PUBLIC})},195007(e,o,a){a.d(o,{A:()=>G});var r=a(97407),t=a(296540),i=a(328138),l=a(427575),s=a(199190),n=a(273869),d=a(643357),c=a(327467),h=a(622165),_=a(534955),m=a(719160),b=a(211974),g=a(568677),u=a(539316),p=a(541260),C=a(378154),x=a(871246),v=a(365955),A=a(474848);function f({selectedContacts:e=[],setSelectedContacts:o}){(0,t.useEffect)(()=>{(0,r.A)("BoardCreateAddCollaborators","/app/www/BoardCreate/BoardCreateAddCollaborators.tsx")},[]);let a=(0,d.A)(),{searchValue:l,allContacts:s,handleTextFieldChange:n,handleTypeaheadSuggestionsChange:c,handleCollaboratorClick:h}=(0,v.A)({selectedContacts:e||[],onSelectedContactsChange:o||(()=>{})}),_=e.map(e=>e.id);return(0,A.jsxs)(i.so,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,A.jsx)(i.az,{paddingY:2,children:(0,A.jsx)(i.KJ,{size:"100",children:a.bt("Add collaborators", "Add collaborators", "text indicates that this section is for adding collaborators to a board", undefined, true)})}),(0,A.jsx)(i.az,{marginBottom:4,marginTop:2,children:(0,A.jsx)(x.A,{onSearchChange:n,onTypeaheadSuggestionsChange:c,searchValue:l})}),(0,A.jsx)(C.A,{contacts:s,itemPadding:2,onCollaboratorToggle:h,selectedContactIds:_})]})}var B=a(310882),j=a(343097);let w=({label:e,labelId:o})=>o?(0,A.jsx)(i.JU,{htmlFor:o,children:(0,A.jsx)(i.KJ,{size:"100",children:e})}):(0,A.jsx)(t.Fragment,{children:e});function z(e){(0,t.useEffect)(()=>{(0,r.A)("BoardFormRow","/app/www/BoardForm/BoardFormRow.tsx")},[]);let{children:o,label:a,labelId:l}=e;return(0,A.jsxs)(t.Fragment,{children:[(0,A.jsx)(i.az,{marginBottom:2,children:(0,A.jsx)(w,{label:a,labelId:l})}),o]})}function y({coverPin:e,handleShowBoardCoverEditModal:o}){(0,t.useEffect)(()=>{(0,r.A)("BoardFormBoardCoverButton","/app/www/BoardForm/BoardFormBoardCoverButton.tsx")},[]);let a=(0,d.A)(),[l,s]=(0,t.useState)(!1),{isRTL:n}=(0,_._8)();return(0,A.jsx)(z,{label:(0,A.jsx)(i._Y,{accessibilityLevel:3,size:"200",children:(0,A.jsx)(i.KJ,{inline:!0,size:"100",children:a.bt("Board cover", "Board cover", "BoardForm.BoardFormCoverButton", undefined, true)})}),children:(0,A.jsx)(i.az,{position:"relative",width:138,children:(0,A.jsx)(i.Rp,{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onTap:o,rounding:400,children:e?.custom_cover?(0,A.jsxs)(t.Fragment,{children:[(0,A.jsx)(i.n1,{height:138,rounding:400,width:138,children:(0,A.jsx)(j.A,{alt:e.image_url,color:"gray",customCover:e.custom_cover,height:138,imgPos:function(e){let{crop:o,size:a}=e||{};if(Array.isArray(o)&&Array.isArray(a))return{x:o[0]||0,y:o[1]||0,width:a[0]||0,height:a[1]||0}}(e),imgUrl:e.image_url||"",renderAsImage:!0,width:138})}),(0,A.jsx)(i.az,{bottom:!0,left:n,padding:2,position:"absolute",right:!n,children:(0,A.jsx)(i.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:l?"white":"rgba(255, 255, 255, 0.8)"}},display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,children:(0,A.jsx)(i.In,{accessibilityLabel:a.bt("Edit board cover", "Edit board cover", "BoardForm.BoardFormBoardCoverButton", undefined, true),color:"default",icon:"pencil",size:16})})})]}):(0,A.jsx)(i.az,{alignItems:"center",color:l?void 0:"secondary",dangerouslySetInlineStyle:l?{__style:{backgroundColor:"#dadada"}}:void 0,display:"flex",height:138,justifyContent:"center",rounding:400,width:138,children:(0,A.jsx)(i.In,{accessibilityLabel:a.bt("Add cover photo", "Add cover photo", "BoardForm.BoardFormCoverButton", undefined, true),color:"default",icon:"plus",size:24})})})})})}function P({children:e,label:o,labelId:a,subtext:l}){return(0,t.useEffect)(()=>{(0,r.A)("BoardFormSettingsRow","/app/www/BoardForm/BoardFormSettingsRow.tsx")},[]),(0,A.jsx)(t.Fragment,{children:(0,A.jsxs)(i.az,{alignItems:"center",display:"flex",justifyContent:"start",marginBottom:10,children:[e,(0,A.jsxs)(i.az,{marginStart:2,children:[(0,A.jsx)(i.JU,{htmlFor:a,children:(0,A.jsx)(i.KJ,{size:"300",weight:"bold",children:o})}),l]})]})})}function E({hasCollabBoardEmail:e,isCollaborative:o,onCheckboxChange:a}){(0,t.useEffect)(()=>{(0,r.A)("BoardFormCollaboratorsEmailCheckbox","/app/www/BoardForm/BoardFormCollaboratorsEmailCheckbox.tsx")},[]);let l=(0,d.A)();return o&&(0,A.jsx)(P,{label:l.bt("Email notifications", "Email notifications", "BoardForm.BoardFormCollaboratorsEmailCheckbox", undefined, true),labelId:"emailNotificationsCheckbox",subtext:(0,A.jsx)(i.KJ,{color:"subtle",size:"300",children:l.bt("Get an email when someone saves Pins to this board", "Get an email when someone saves Pins to this board", "BoardForm.BoardFormCollaboratorsEmailCheckbox", undefined, true)}),children:(0,A.jsx)(i.so,{alignItems:"center",justifyContent:"start",children:(0,A.jsx)(i.az,{marginEnd:1,children:(0,A.jsx)(i.Sc,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:a})})})})}var F=a(409848),S=a(194637),I=a(748304);function k({board:e,onCollaboratorInviteClick:o}){(0,t.useEffect)(()=>{(0,r.A)("BoardCollaboratorsAndInviteSection","/app/www/boardEdit/BoardCollaboratorsAndInviteSection.tsx")},[]);let a=(0,d.A)(),l=(0,I.A)({boardId:e.id,ownerId:e.owner.id,ownerName:e.owner.full_name??"",ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_medium_url||e.owner.image_small_url||""});return(0,A.jsxs)(i.so,{alignItems:"center",justifyContent:"between",children:[(0,A.jsx)(S.Z7,{collaborators:l.map(({name:e,src:o,color:a})=>({src:o?.endsWith("/default_75.png")?void 0:o,name:e,color:a})),size:"md"}),(0,A.jsx)(i.K0,{accessibilityLabel:a.bt("Invite collaborators", "Invite collaborators", "BoardEdit.BoardCollaboratorsAndInviteSection", undefined, true),bgColor:"secondary",icon:"plus",iconColor:"default",onClick:o,size:"lg"})]})}function T({board:e,onCollaboratorInviteClick:o}){(0,t.useEffect)(()=>{(0,r.A)("BoardFormCollaboratorsInviteList","/app/www/BoardForm/BoardFormCollaboratorsInviteList.tsx")},[]);let a=(0,d.A)(),l=(0,A.jsxs)(i.so,{alignItems:"center",justifyContent:"start",children:[(0,A.jsx)(i._Y,{accessibilityLevel:3,size:"200",children:(0,A.jsx)(i.KJ,{inline:!0,size:"100",children:a.bt("Collaborators", "Collaborators", " - ", undefined, true)})}),(0,A.jsx)(F.A,{}),(0,A.jsx)(i.KJ,{inline:!0,size:"100",weight:"bold",children:(0,A.jsx)(i.N_,{accessibilityLabel:a.bt("Find out more about creating and managing group boards.", "Learn more about creating and managing group boards.", "BoardForm.BoardFormCollaboratorsInviteList", undefined, true),display:"inlineBlock",href:"https://www.pinterest.com/_/_/help/article/group-boards?source=board_create",target:"blank",underline:"hover",children:a.bt("Learn more", "Learn more", " - ", undefined, true)})})]});return(0,A.jsx)(z,{label:l,children:(0,A.jsx)(k,{board:e,onCollaboratorInviteClick:o})})}function D({collaboratorInvitesEnabled:e,isCollaborative:o,onCheckboxChange:a}){(0,t.useEffect)(()=>{(0,r.A)("BoardFormCollaboratorsInviteToggle","/app/www/BoardForm/BoardFormCollaboratorsInviteToggle.tsx")},[]);let l=(0,d.A)();return o&&(0,A.jsx)(P,{label:l.bt("Let collaborators add people", "Let collaborators add people", "BoardForm.BoardFormCollaboratorsInviteToggle", undefined, true),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,A.jsx)(i.Sc,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:a})})}function L({description:e,descriptionValidatorErrors:o,onChange:a}){(0,t.useEffect)(()=>{(0,r.A)("BoardFormDescription","/app/www/BoardForm/BoardFormDescription.tsx")},[]);let l=(0,d.A)(),s="boardEditDescription";return(0,A.jsx)(z,{label:l.bt("Description", "Description", "BoardForm.BoardFormDescription", undefined, true),labelId:s,children:(0,A.jsx)(i.fs,{errorMessage:o.join(", "),id:s,name:"description",onChange:a,placeholder:l.bt("What's your board about?", "What's your board about?", " - ", undefined, true),value:e})})}let M=({children:e})=>((0,t.useEffect)(()=>{(0,r.A)("BoardFormList","/app/www/BoardForm/BoardFormList.tsx")},[]),(0,A.jsx)(i.az,{paddingX:8,role:"list",children:t.Children.map(e,(o,a)=>o&&(0,A.jsx)(i.az,{marginBottom:a===t.Children.count(e)-1?1:8,role:"listitem",children:o},a))}));function N({name:e,nameValidatorErrors:o,onChange:a,disabled:l}){(0,t.useEffect)(()=>{(0,r.A)("BoardFormTitleInput","/app/www/BoardForm/BoardFormTitleInput.tsx")},[]);let s=(0,d.A)();return(0,A.jsx)(z,{label:s.bt("Name", "Name", "BoardForm.BoardFormTitleInput", undefined, true),labelId:"boardEditName",children:(0,A.jsx)(i.A_,{disabled:l,errorMessage:o.join(", "),id:"boardEditName",name:"boardName",onChange:a,placeholder:s.bt("E.g. \"Places to go\" or \"Recipes to make\"", "Like \"Places to Go\" or \"Recipes to Make\"", " - ", undefined, true),size:"lg",value:e})})}let R=({board:e,collabBoardEmail:o,collaboratorInvitesEnabled:a,coverPin:l,currentUserIsOwner:s,description:n,descriptionValidatorErrors:c,handleBoardLeave:h,isCollaborative:_,showCoverEdit:m,name:b,nameValidatorErrors:g,handleShowBoardCoverEditModal:u,handleChangeName:p,handleChangeDescription:C,handleShowCollaboratorsModal:x,handleChangeCollabBoardEmail:v,handleChangeCollaboratorInvitesEnabled:f,shouldShowCollaboratorsInviteToggle:B})=>{(0,t.useEffect)(()=>{(0,r.A)("AdsOnlyBoardFormFields","/app/www/BoardForm/AdsOnlyBoardFormFields.tsx")},[]);let j=(0,d.A)();return(0,A.jsxs)(M,{children:[m&&(0,A.jsx)(y,{coverPin:l,handleShowBoardCoverEditModal:u}),(0,A.jsx)(N,{disabled:!0,name:b,nameValidatorErrors:g,onChange:p}),(0,A.jsx)(L,{description:n,descriptionValidatorErrors:c,onChange:C}),s&&!!h&&(0,A.jsx)(T,{board:e,onCollaboratorInviteClick:x}),_&&(0,A.jsx)(i.az,{marginBottom:-7,children:(0,A.jsx)(i.KJ,{size:"100",children:j.bt("Settings", "Settings", "BoardForm.BoardForm", undefined, true)})}),(0,A.jsx)(E,{hasCollabBoardEmail:o,isCollaborative:_,onCheckboxChange:v}),B&&(0,A.jsx)(D,{collaboratorInvitesEnabled:a,isCollaborative:_,onCheckboxChange:f})]})};var J=a(645519);function O({isProtectedToggler:e,isToggleDisable:o,onChange:a,onCheckboxChange:l,privacy:s}){(0,t.useEffect)(()=>{(0,r.A)("BoardFormPrivacyToggle","/app/www/BoardForm/BoardFormPrivacyToggle.tsx")},[]);let n=(0,d.A)();if(!0===e)return(0,A.jsx)(P,{label:n.bt("Protected board (not listed on user's profile)", "Protected board (not listed on user's profile)", "BoardForm.BoardFormSecretToggle", undefined, true),labelId:"protected",children:(0,A.jsx)(i.az,{paddingY:2,children:(0,A.jsx)(i.dO,{disabled:o,id:"protected",onChange:a,switched:s===J.A.BoardPrivacy.PROTECTED})})});if(s!==J.A.BoardPrivacy.PROTECTED){let e=n.bt("Keep this board secret", "Keep this board secret", "BoardForm.BoardFormSecretToggle", undefined, true),a=(0,A.jsx)(t.Fragment,{children:(0,A.jsxs)(i.KJ,{color:"subtle",inline:!0,size:"300",children:[n.bt("So only you and collaborators can see it.", "So only you and collaborators can see it.", "BoardForm.BoardFormSecretToggle", undefined, true)," ",(0,A.jsx)(i.N_,{accessibilityLabel:n.bt("Learn more about secret boards.", "Learn more about secret boards.", "BoardForm.BoardFormPrivacyToggle.Link", undefined, true),display:"inline",href:"https://www.pinterest.com/_/_/help/article/change-board-privacy?source=secret_create",target:"blank",children:n.bt("Learn more", "Learn more", "BoardForm.BoardFormSecretToggle", undefined, true)})]})});return(0,A.jsx)(P,{label:e,labelId:"secret",subtext:a,children:(0,A.jsx)(i.so,{alignItems:"center",justifyContent:"start",children:(0,A.jsx)(i.Sc,{checked:s===J.A.BoardPrivacy.SECRET,disabled:o,id:"secret",name:"secret",onChange:l})})})}return null}function K({allowHomefeedRecommendations:e,onCheckboxChange:o}){(0,t.useEffect)(()=>{(0,r.A)("BoardFormRecommendationToggle","/app/www/BoardForm/BoardFormRecommendationToggle.tsx")},[]);let a=(0,d.A)();return(0,A.jsx)(P,{label:a.bt("Personalisation", "Personalization", "BoardForm.BoardFormRecommendationToggle", undefined, true),labelId:"recommendation",subtext:(0,A.jsx)(i.KJ,{color:"subtle",size:"300",children:a.bt("Show Pins inspired by this board in your home feed.", "Show Pins inspired by this board in your home feed.", "BoardForm.BoardFormRecommendationToggle", undefined, true)}),children:(0,A.jsx)(i.Sc,{checked:e,id:"recommendation",name:"recommendation",onChange:o})})}var Y=a(215030);function H(e,o,a){var r;return(o="symbol"==typeof(r=function(e,o){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,o||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(o,"string"))?r:r+"")in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}let V=(0,t.lazy)(()=>Promise.all([a.e("91796"),a.e("46745")]).then(a.bind(a,221185))),U=(0,t.lazy)(()=>Promise.all([a.e("5758"),a.e("78437"),a.e("49364")]).then(a.bind(a,775415))),W=({condition:e,children:o})=>e?(0,A.jsx)(i.az,{position:"absolute",zIndex:n.nH,children:o}):o;class $ extends t.Component{constructor(e){super(e),H(this,"handleChangeName",({value:e})=>{let o=(0,u.Yl)((0,Y.D)(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:o})}),H(this,"handleChangeDescription",({value:e})=>{let o=(0,u.Yl)((0,Y._)(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:o})}),H(this,"handleChangePrivacyToggle",({value:e})=>{let o="public";e&&(o=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==o&&this.setState({privacy:o})}),H(this,"handleEnableSecret",()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})}),H(this,"handleHideSecretConfirmation",()=>{this.setState({showSecretConfirmation:!1})}),H(this,"handleChangeRecommendationToggle",({value:e})=>{this.setState({allowHomefeedRecommendations:e})}),H(this,"handleChangeCollabBoardEmail",({value:e})=>{this.setState({collab_board_email:e})}),H(this,"handleChangeCollaboratorInvitesEnabled",({value:e})=>{this.setState({collaboratorInvitesEnabled:e})}),H(this,"handleCheckboxChange",e=>({event:o,checked:a})=>e({event:o,value:a})),H(this,"handleSubmit",e=>{let{onSubmit:o,shouldShowCollaboratorsInviteToggle:a}=this.props,{collab_board_email:r,collaboratorInvitesEnabled:t,description:i,name:s,privacy:n,allowHomefeedRecommendations:d}=this.state;if("preventDefault"in e&&e.preventDefault&&e.preventDefault(),this.submitDisabled())return;let c=s.trim(),h=i.trim();this.setState({submitting:!0,submitError:""}),o(a?{name:c,collab_board_email:r,collaborator_invites_enabled:t,description:h,privacy:n,allow_homefeed_recommendations:d}:{name:c,collab_board_email:r,description:h,privacy:n,allow_homefeed_recommendations:d}).then(()=>{this.setState({submitting:!1})}).catch(e=>{let o=this.props.i18n.bt("Something went wrong.", "Uh oh! Something went wrong.", " - ", undefined, true),a=(0,l.A)(e,"message");if(a){let r=(0,l.A)(e,"message_detail");o=r?`${a} ${r}`:a}else"string"==typeof e&&(o=e);this.setState({submitting:!1,submitError:o})})}),H(this,"handleShowBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!0})}),H(this,"handleHideBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!1})}),H(this,"handleShowCollaboratorsModal",()=>{this.setState({showCollaboratorsModal:!0})}),H(this,"handleHideCollaboratorsModal",()=>{this.setState({showCollaboratorsModal:!1})}),H(this,"handleSaveBoardCoverEditModal",e=>{this.handleHideBoardCoverEditModal();let{onCropChange:o}=this.props;o&&o(e)});let{board:{collab_board_email:o,collaborator_invites_enabled:a,description:r,name:t,pin_count:i,privacy:s,allow_homefeed_recommendations:n}}=e;this.state={collab_board_email:o,description:r,name:t,pin_count:i,privacy:s,allowHomefeedRecommendations:n,collaboratorInvitesEnabled:a,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:t,previousDescription:r,previousPrivacy:s}}static getDerivedStateFromProps(e,o){let a={};return e.board.name&&e.board.name!==o.previousName&&(a.name=e.board.name,a.previousName=e.board.name,a.nameValidatorErrors=(0,u.Yl)((0,Y.D)(e.i18n),e.board.name)),e.board.description&&e.board.description!==o.previousDescription&&(a.previousDescription=e.board.description,a.descriptionValidatorErrors=(0,u.Yl)((0,Y._)(e.i18n),e.board.description)),e.board.privacy&&e.board.privacy!==o.previousPrivacy&&(a.previousPrivacy=e.board.privacy),a}getFormFooter(){let{submitText:e}=this.props,{submitError:o}=this.state;return(0,A.jsxs)(t.Fragment,{children:[(0,A.jsx)(i.so,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,A.jsx)(i.az,{children:(0,A.jsx)(i.so,{alignItems:"stretch",justifyContent:"start",children:(0,A.jsx)(i.az,{height:48,children:(0,A.jsx)(i.$n,{color:"primary",dataTestId:"board-form-submit-button",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),o&&(0,A.jsx)(i.az,{"aria-live":"polite",paddingX:1,tabIndex:0,children:(0,A.jsx)(i.KJ,{color:"error",children:o})})]})}submitDisabled(){let{descriptionValidatorErrors:e,name:o,nameValidatorErrors:a,submitting:r}=this.state;return!o||a.length>0||e.length>0||r}render(){let{board:e,board:{archived_by_me_at:o,cover_pin:a,id:r,is_collaborative:l},coverImageHeight:n,coverImageWidth:d,currentUserIsOwner:h,handleBoardLeave:_,isAdAccount:b,isAdAccountOwner:g,isDeletable:u,isDesktop:C,isEditable:x,isNameAndSecretView:v,onClose:j,onDeleteButtonClick:w,requestContext:z,title:P,useModalWithNoLayer:F,showSecretBoardCreateToggle:S,shouldShowAddCollaborators:I,shouldShowCollaboratorsInviteToggle:k,setSelectedContacts:J,selectedContacts:Y,isProfilePublisher:H}=this.props,{allowHomefeedRecommendations:$,collab_board_email:G,collaboratorInvitesEnabled:X,description:q,descriptionValidatorErrors:Q,name:Z,nameValidatorErrors:ee,pin_count:eo,privacy:ea,showBoardCoverEdit:er,showCollaboratorsModal:et,showSecretConfirmation:ei}=this.state,el=x&&eo>0,es=e.is_ads_only,en=(0,A.jsxs)(M,{children:[el&&(0,A.jsx)(y,{coverPin:a,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,A.jsx)(N,{disabled:es,name:Z,nameValidatorErrors:ee,onChange:this.handleChangeName}),(0,A.jsx)(L,{description:q,descriptionValidatorErrors:Q,onChange:this.handleChangeDescription}),h&&!!_&&(0,A.jsx)(T,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,A.jsxs)(i.LB,{legend:this.props.i18n.bt("Settings", "Settings", "BoardForm.BoardForm", undefined, true),children:[(0,A.jsx)(O,{isProtectedToggler:!!b,isToggleDisable:!!b&&!g&&!H,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:ea}),!o&&(0,A.jsx)(K,{allowHomefeedRecommendations:$,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,A.jsx)(E,{hasCollabBoardEmail:G,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),k&&(0,A.jsx)(D,{collaboratorInvitesEnabled:X,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)})]}),u&&(0,A.jsxs)(i.az,{marginTop:-15,paddingY:4,children:[(0,A.jsx)(i._Y,{accessibilityLevel:3,size:"200",children:(0,A.jsx)(i.KJ,{inline:!0,size:"100",children:this.props.i18n.bt("Action", "Action", "BoardForm.BoardForm.Action", undefined, true)})}),(0,A.jsxs)(i.Rp,{onTap:w,children:[(0,A.jsx)(i.az,{"data-test-id":"deleteBoardButton",marginBottom:1,marginTop:2,children:(0,A.jsx)(i._Y,{accessibilityLevel:4,size:"400",children:this.props.i18n.bt("Delete board", "Delete board", "BoardForm.Delete", undefined, true)})}),(0,A.jsx)(i.KJ,{color:"subtle",size:"300",children:(0,c.vQ)(this.props.i18n.bt("You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }} days to restore a deleted board. After that, it will be deleted permanently.", "You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }} days to restore a deleted Board. After that, it will be permanently deleted.", "boardForm.delete.helperText", undefined, true),{MAX_AGE_RECENTLY_DELETED_BOARD:p.lx})})]})]})]});h?v&&(en=(0,A.jsxs)(M,{children:[(0,A.jsx)(N,{disabled:es,name:Z,nameValidatorErrors:ee,onChange:this.handleChangeName}),!S&&(0,A.jsx)(O,{isProtectedToggler:!!b,isToggleDisable:!!b&&!g&&!H,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:ea}),I&&(0,A.jsx)(f,{selectedContacts:Y,setSelectedContacts:J})]})):en=(0,A.jsxs)(M,{children:[!!_&&(0,A.jsx)(T,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,A.jsx)(E,{hasCollabBoardEmail:G,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!o&&es&&(0,A.jsx)(K,{allowHomefeedRecommendations:$,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,A.jsx)(i.KJ,{color:"subtle",size:"300",children:(0,c.vQ)(this.props.i18n.bt("Only the board’s owner ({{ boardOwner }}) can manage the rest of its features", "Only the board’s owner ({{ boardOwner }}) can manage the rest of its features", "BoardForm.CollaboratorPermissionsCopy", undefined, true),{boardOwner:(0,A.jsx)(i.KJ,{color:"subtle",inline:!0,size:"300",weight:"bold",children:e.owner.full_name})})})]});let ed=F?i.aF:s.Ay,ec=this.props.i18n.bt("Change board cover", "Change board cover", "BoardForm.BoardCoverEdit.heading", undefined, true),eh=(0,A.jsxs)(i.az,{paddingY:8,position:"relative",children:[(0,A.jsx)(i._Y,{align:"center",size:"600",children:ec}),(0,A.jsx)(i.az,{left:z.isRTL,paddingX:6,paddingY:8,position:"absolute",right:!z.isRTL,top:!0,children:(0,A.jsx)(i.K0,{accessibilityLabel:this.props.i18n.bt("Cancel change board cover", "Cancel change board cover", "BoardForm.BoardCoverEdit.cancel", undefined, true),icon:"close",iconColor:"default",onClick:this.handleHideBoardCoverEditModal,size:"md"})})]}),e_=this.props.i18n.bt("Board form", "Board form", "BoardForm.BoardForm", undefined, true),em=(0,A.jsx)(i.az,{"data-test-id":"board-form-container",marginEnd:"auto",marginStart:"auto",rounding:200,children:(0,A.jsxs)("form",{method:"post",onSubmit:this.handleSubmit,children:[!es&&en,es&&(0,A.jsx)(R,{board:e,collabBoardEmail:G,collaboratorInvitesEnabled:X,coverPin:a,currentUserIsOwner:h,description:q,descriptionValidatorErrors:Q,handleBoardLeave:_,handleChangeCollabBoardEmail:this.handleCheckboxChange(this.handleChangeCollabBoardEmail),handleChangeCollaboratorInvitesEnabled:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled),handleChangeDescription:this.handleChangeDescription,handleChangeName:this.handleChangeName,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal,handleShowCollaboratorsModal:this.handleShowCollaboratorsModal,isCollaborative:l,name:Z,nameValidatorErrors:ee,shouldShowCollaboratorsInviteToggle:k,showCoverEdit:el})]})}),eb=(0,A.jsx)(W,{condition:!!F,children:(0,A.jsx)(ed,{accessibilityModalLabel:e_,footer:this.getFormFooter(),heading:P,onDismiss:j,size:"sm",children:em})});return(0,A.jsxs)(t.Fragment,{children:[!er&&!et&&eb,er&&C&&(0,A.jsx)(m.A,{children:(0,A.jsx)(V,{boardId:r,boardName:Z,coverPinId:a?.pin_id,frameHeight:n,frameWidth:d,heading:eh,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal})}),ei&&(0,A.jsx)(B.A,{confirmButtonLabel:this.props.i18n.bt("Make secret", "Make secret", "Setting the boards visibility to secret", undefined, true),heading:this.props.i18n.bt("Are you sure?", "Are you sure?", "Warning label asking users to be sure of their action", undefined, true),message:this.props.i18n.bt("If you make this board secret, some active ads will stop running", "If you make this board secret, some active ads will stop running", "Explicitly warning users of the board visibility action they are doing", undefined, true),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),et&&(0,A.jsx)(m.A,{children:(0,A.jsx)(U,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})})]})}componentDidMount(){(0,r.A)("BoardForm","/app/www/BoardForm/BoardForm.tsx")}}function G(e){(0,t.useEffect)(()=>{(0,r.A)("BoardForm","/app/www/BoardForm/BoardForm.tsx")},[]);let o=(0,d.A)(),a=(0,g.Ay)(),{checkExperiment:i}=(0,h.A)(),l=!i("sg_hide_collab_invite_on_edit_modal").anyEnabled;return(0,A.jsx)($,{...e,i18n:o,isDesktop:"desktop"===a,requestContext:(0,_._8)(),shouldShowCollaboratorsInviteToggle:l,toastManagerContext:(0,b.CG)()})}H($,"defaultProps",{isNameAndSecretView:!1})},310882(e,o,a){a.d(o,{A:()=>d});var r=a(97407),t=a(296540),i=a(328138),l=a(199190),s=a(643357),n=a(474848);function d({cancelButtonLabel:e,confirmButtonLabel:o,heading:a,message:d,onCancel:c,onConfirm:h}){(0,t.useEffect)(()=>{(0,r.A)("BoardEditConfirmation","/app/www/boardEdit/BoardEditConfirmation.tsx")},[]);let _=(0,s.A)(),m=a||_.bt("Are you sure?", "Are you sure?", " - ", undefined, true),b=e||_.bt("Cancel", "Cancel", " - ", undefined, true);return(0,n.jsx)(l.Ay,{accessibilityModalLabel:m,footer:(0,n.jsxs)(i.az,{marginEnd:-1,marginStart:-1,children:[(0,n.jsx)(i.az,{"data-test-id":"cancel-button",padding:1,children:(0,n.jsx)(i.$n,{fullWidth:!0,onClick:c,size:"lg",text:b})}),(0,n.jsx)(i.az,{"data-test-id":"confirm-button",padding:1,children:(0,n.jsx)(i.$n,{color:"primary",fullWidth:!0,onClick:h,size:"lg",text:o})})]}),heading:m,onDismiss:c,role:"alertdialog",children:(0,n.jsx)(i.az,{padding:4,children:(0,n.jsx)(i.KJ,{children:d})})})}},748304(e,o,a){a.d(o,{A:()=>l,B:()=>s});var r=a(468133),t=a(584463);let i=({boardId:e,ownerId:o,ownerUsername:a,ownerName:i,ownerImgSrc:l})=>{let s=(0,t.A)(),{data:n,isLoaded:d}=(0,r.A)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...s?{orbac_subject_id:s}:{}}}),c=[{id:o,name:i,src:l,href:`/${a}/`,isDim:!1}];return d&&n&&n.length>0&&n.forEach(e=>{c.push({id:e.invited_user?e.invited_user.id:"",name:e&&e.invited_user?e.invited_user.full_name:"",color:e&&e.invited_user?e.invited_user.avatar_color_index:void 0,src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})}),c},l=i;function s({children:e,...o}){return e(i(o))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/91946.en_GB-0e543a18459d56a5.mjs.map