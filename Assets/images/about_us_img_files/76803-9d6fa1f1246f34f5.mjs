(self.modernJsonp=self.modernJsonp||[]).push([["76803"],{618475(e,a,t){t.d(a,{aj:()=>L,Ay:()=>C,ss:()=>A,Ic:()=>w});var n=t(328138);let o=Object.freeze({DAILY:1,WEEKLY:2,BIWEEKLY:3,MONTHLY:4}),l=Object.freeze({ONE_WEEK:"7D",ONE_MONTH:"30D",THREE_MONTH:"90D",SIX_MONTH:"180D",ONE_YEAR:"365D",TWO_YEAR:"730D"}),i=new n.rk(10),s=new n.K5([i]),r=new n.K5([s]),_=new n.K5([r]),d=new n.K5([_]),u=Object.freeze({AGE_18_24:"18-24",AGE_21_24:"21-24",AGE_18_20:"18-20",AGE_25_34:"25-34",AGE_35_44:"35-44",AGE_45_49:"45-49",AGE_50_54:"50-54",AGE_55_64:"55-64",AGE_65_PLUS:"65+"}),p={[u.AGE_18_20]:2,[u.AGE_21_24]:3,[u.AGE_25_34]:4,[u.AGE_35_44]:5,[u.AGE_45_49]:6,[u.AGE_50_54]:7,[u.AGE_55_64]:8,[u.AGE_65_PLUS]:9,AGE_UNSUPORTED:10},c=l.ONE_MONTH,E={[l.ONE_WEEK]:o.DAILY,[l.ONE_MONTH]:o.DAILY,[l.THREE_MONTH]:o.WEEKLY,[l.SIX_MONTH]:o.WEEKLY,[l.ONE_YEAR]:o.WEEKLY},g=Object.freeze({DETAIL:"/detail/",HOME:"/"}),m={[l.ONE_WEEK]:1,[l.ONE_MONTH]:2,[l.THREE_MONTH]:3,[l.SIX_MONTH]:4,[l.ONE_YEAR]:5},S={[l.ONE_WEEK]:7,[l.ONE_MONTH]:30,[l.THREE_MONTH]:90,[l.SIX_MONTH]:180,[l.ONE_YEAR]:365,[l.TWO_YEAR]:730},h={MALE:"male",FEMALE:"female",UNSPECIFIED:"unspecified"},T={...h,UNSPECIFIED:"unknown"},b={[h.MALE]:0,[h.FEMALE]:1,[h.UNSPECIFIED]:2},O={TOP_TRENDS_INTERNAL:"1",GROWING_TRENDS_INTERNAL:"2",BREAKOUT_TRENDS_INTERNAL:"3",SEASONAL_TRENDS_INTERNAL:"4",TOP_MONTHLY_TRENDS:"1",TOP_YEARLY_TRENDS:"2",GROWING_TRENDS:"3",SEASONAL_TRENDS:"4"},I=Object.freeze({[O.TOP_TRENDS_INTERNAL]:"Top Trends",[O.GROWING_TRENDS_INTERNAL]:"Growing Trends",[O.BREAKOUT_TRENDS_INTERNAL]:"Breakout Trends"}),v={[O.TOP_MONTHLY_TRENDS]:"Top Monthly Trends",[O.TOP_YEARLY_TRENDS]:"Top Yearly Trends",[O.GROWING_TRENDS]:"Growing Trends",[O.SEASONAL_TRENDS]:"Seasonal Trends"};Object.freeze({L1:1,L2:2,L3:3}),Object.freeze({ONE_MONTH:2,THREE_MONTHS:3,SIX_MONTHS:4,ONE_YEAR:5}),Object.freeze({HIGH_VOLUME:1,GROWTH:2});let y=Object.freeze({HIGH_VOLUME:"HIGH_VOLUME",GROWTH:"GROWTH"});Object.freeze({NC_ENGAGEMENT_PLUS_ACTIVE_FOLLOWERS_90d:1});let w=`https://trends.pinterest.com${g.DETAIL}`,N=Object.freeze([l.ONE_MONTH,l.ONE_YEAR,l.THREE_MONTH,l.ONE_MONTH]),A="https://i.pinimg.com/originals/3d/2f/41/3d2f41008f24a1839f25021cf78e908d.png",L=444,C={PAGES:g,TOAST_DURATION:3e3,Z_INDEX_TRENDS_HEADER:i,Z_INDEX_TRENDS_FEEDBACK_BUTTON:s,Z_INDEX_TRENDS_AUTOCOMPLETE_BOX:r,Z_INDEX_TRENDS_SEARCH_FORM:_,Z_INDEX_TRENDS_TOOLTIP:d,DEPRECATED_GESTALT_COLORS_HEX_VALUES:{red:"var(--base-color-red-300)",white:"#FFF",lightGray:"#EFEFEF",gray:"#8E8E8E",darkGray:"#333",green:"#0FA573",pine:"#0A6955",olive:"#364A4C",blue:"#4A90E2",navy:"#004B91",midnight:"#133A5E",purple:"#B469EB",orchid:"#8046A5",eggplant:"#5B2677",maroon:"#6E0F3C",watermelon:"#F13535",orange:"#E3780C"},MOBILE_MAX_WIDTH:576,FEEDBACK_CHAR_LIMIT:3e3,DEFAULT_CARD_WIDTH:357,DEFAULT_CARD_HEIGHT_RATIO:.65,FIVE_CARD_WIDTH:204,FIVE_CARD_HEIGHT_RATIO:.74,FIVE_LEFT_IMAGE_WIDTH_RATIO:.65,SMALL_CARD_WIDTH:220,DEFAULT_DAYS:"360",CARD_PADDING:10,FIVE_CARD_PADDING:24,PAGE_PADDING:160,MOBILE_HEIGHT:280,DESKTOP_HEIGHT:340,DESKTOP_PREDICTION_CHART_HEIGHT:480,DESKTOP_MOMENT_PREDICTION_CHART_HEIGHT:440,MOBILE_WIDTH:360,DESKTOP_WIDTH:900,CARD_WIDTH_PLUS_PADDING:377,AGE_21_PLUS:"21+",DEFAULT_COUNTRY:"US",TOP_TRENDS_PARAMETER:"topTrendsParameter",DEFAULT_DESIRED_CARD_PER_ROW:3,EXTERNAL_DESIRED_CARD_PER_ROW:5,DATE_FILTER_FORMAT:"MM/DD/YY",ALL:"all",TRENDS_CAMPAIGN_PLANNER:"TRENDS_CAMPAIGN_PLANNER",TRENDS:"TRENDS",PICK:"pick",PLUS_ICON:"+",MINUS_ICON:"-",FILTERABLE_TABLE_ROWS_PER_PAGE:Object.freeze({FIFTY:"50",ONE_HUNDRED:"100",TWO_HUNDRED_FIFTY:"250"}),DEBOUNCE_MILISECONDS:300,FILTER_SECTION:{FILTER_BAR_WIDTH:270,FILTER_BAR_MIN_HEIGHT:432,DATE_RANGE_WIDTH:178,DATE_PICKER_WIDTH:166,EXTERNAL_FILTER_BAR_WIDTH:225},DEFAULT_NUM_TOP_TRENDS:250,DEFAULT_EXTERNAL_NUM_TOP_TRENDS:50,GENDER:h,GENDER_MP:T,GENDER_TO_THRIFT_CONST:b,AGE_BUCKETS:u,AGE_TO_THRIFT_CONST:p,THRIFT_TO_AGE_CONST:{2:"18-20",3:"21-24",4:"25-34",5:"35-44",6:"45-49",7:"50-54",8:"55-64",9:"65+"},THRIFT_TO_GENDER_CONST:{0:"male",1:"female",2:"unknown"},LOOK_BACK_WINDOW:l,LOOK_BACK_WINDOW_DEFAULT:c,LOOK_BACK_WINDOW_TO_THRIFT_CONST:m,LOOK_BACK_WINDOW_TO_AGGREGATION_CONST:E,LOOK_BACK_WINDOW_TO_DAYS:S,TRENDS_TYPES:O,TRENDS_INTERNAL_TYPES_VALUES_TO_LABELS:I,TRENDS_EXTERNAL_TYPES_VALUES_TO_LABELS:v,URL_PARAM_BOOLEAN_VALUES:{TRUE:"true",FALSE:"false"},SEASONALITY_SCORE_THRESHOLD:.825,SEASONALITY_SCORE_OLD_THRESHOLD:.75,SEASONALITY_SCORE_THRESHOLD_CUTOVER_DATE:"2024-04-08",SORT_ORDER:Object.freeze({DESC:"desc",ASC:"asc"}),FILTER_TYPES:Object.freeze({OPPORTUNITY:"OPPORTUNITY",CAMPAIGN:"CAMPAIGN"}),SORT_BY:Object.freeze({TREND_RANK:"TREND_RANK",TOTAL_SEARCH:"TOTAL_SEARCH",WEEKLY_CHANGE:"WEEKLY_CHANGE",MONTHLY_CHANGE:"MONTHLY_CHANGE",YEARLY_CHANGE:"YEARLY_CHANGE"}),URL_JOIN_SIGN:"|",CONCATENATED_STRING_SEPARATOR:", ",CSV_SEPARATOR:",",TERM_ALL:"all",DEBOUNCE_AUDIENCE_SIZE:1e3,MAX_ADD_TERMS:50,L1_SECTIONS:{ALL:{value:"all",label:"All categories"},FOOD_AND_DRINK:{value:"foodanddrink",label:"Food and drinks",id:"918530398158"},BEAUTY:{value:"beauty",label:"Beauty",id:"935541271955"},HOME_DECOR:{value:"homedecor",label:"Home decor",id:"935249274030"},FASHION:{value:"fashion",label:"Fashion",id:"948967005229"},TRAVEL:{value:"travel",label:"Travel",id:"908182459161"},ART:{value:"art",label:"Art",id:"961238559656"},QUOTES:{value:"quotes",label:"Quotes",id:"948192800438"},ENTERTAINMENT:{value:"entertainment",label:"Entertainment",id:"953061268473"},DIY_AND_CRAFTS:{value:"diyandcrafts",label:"DIY and crafts",id:"934876475639"},HEALTH:{value:"health",label:"Health",id:"898620064290"},WEDDINGS:{value:"weddings",label:"Wedding",id:"903260720461"},EVENT_PLANNING:{value:"eventplanning",label:"Event planning",id:"941870572865"},LAWN_AND_GARDEN:{value:"lawnandgarden",label:"Gardening",id:"909983286710"},ANIMALS:{value:"animals",label:"Animals",id:"925056443165"},PARENTING:{value:"parenting",label:"Parenting",id:"920236059316"},EDUCATION:{value:"education",label:"Education",id:"922134410098"},VEHICLES:{value:"vehicles",label:"Vehicles",id:"918093243960"},DESIGN:{value:"design",label:"Design",id:"902065567321"},SPORTS:{value:"sports",label:"Sport",id:"919812032692"},ELECTRONICS:{value:"electronics",label:"Electronics",id:"960887632144"},FINANCE:{value:"finance",label:"Finance",id:"913207199297"},ARCHITECTURE:{value:"architecture",label:"Architecture",id:"918105274631"}},BASE_BANNER_HEIGHT:627,COUNT_TYPES:{COUNT:"count",NORMALIZED_COUNT:"normalizedCount"},EXTERNAL_LOOKBACK_WINDOW_MAPPED_TREND_TYPES:N,FEEDBACK_SLACK_CHANNEL:"slack://channel?team=T024LJUGB&id=CKBF9A6EL",MAX_TERMS:4,COUNTRY_FULL_NAMES:{US:"the United States",CA:"Canada",GB:"the United Kingdom",IN:"India",AU:"Australia"},CONCATENATED_INTERESTS_PARAM_KEY:"concatenatedInterests",FILTER_INTEREST_IDS_PARAM_KEY:"filterInterestIds",FILTER_AGE_IDS_PARAM_KEY:"filterAgeIds",FILTER_GENDERS_PARAM_KEY:"filterGenders",EXPORT_TYPES:{DISCOVER:"discover",DETAILS:"details",CAMPAIGN:"campaignPlan"},EXPORT_NA:"N/A",EXPORT_ALL:"All",EXPORT_NONE:"None",ENGLISH_LANGUAGE_CODE:"en",KEYWORD_SPLIT_CHARACTER:`
`,COUNTRY_PREFIX_POSTAL_CODE_SEPARATOR:":",EXPORT_MESSAGE_HEADER:"Export in progress",DEPRECATED_COLOR_VALUES:["blue","green","purple","orange","red","maroon","orchid","navy","pine","watermelon"],EXPORT_MESSAGE:"This should only take a few seconds. Don't go back.",POPULAR_PINS_MAXIMUM_IMAGES:9,MAXIMUM_TERM_IMAGES_BULK_SIZE:250,TERM_IMAGE_MEMCACHE_KEY_PREFIX:"timg:",EXTRA_TERM_IMAGES:80,DESIRED_PIN_IMAGE_SIZE:"236x",PIN_IMAGE_URL_PREFIX:"https://i.pinimg.com/",PIN_IMAGE_URL_SUFFIX:".jpg",PIN_IMAGE_DEFAULT_CACHE_TIME_S:86400,DOUBLE_ROW_CARD_WIDTH:170,TOP_TRENDS_CAROUSEL_TERMS:9,TRENDS_FOR_PINS_MODULE_BREAK_WIDTH:1380,TRENDS_SEARCHBAR_HEIGHT:193,TOP_TRENDS_CAROUSEL_EXTENDED_TERMS:30,TOP_TRENDS_UNAUTH_CAROUSEL_TERMS:25,TOP_TRENDS_DOUBLE_ROW_MAX_TERMS:6,DETAILS_PAGE_SEARCH_OVERTIME_SUBTITLE_WIDTH:750,PT_IMAGE_SIZE:"236x",FILTERED_TABLE_IMAGE_SIZE:"30x30",TOP_TREND_CAROUSEL_IMAGE_SIZE:"236x",MOMENT_IMAGE_CARD_SIZE:"70x70",PERSONALIZED_TREND_TYPES:y,PREDICTION_SUPPORTED_COUNTRIES:["US"],MOMENT_PREDICTION_LOOKBACK_DAYS:730,MILLISECONDS_PER_DAY:864e5}},301135(e,a,t){t.d(a,{YQ:()=>o});var n=t(296540);t(105367),(0,n.createContext)({isUpsellUnauthModalOpen:!1,openUpsellUnauthModal:()=>{},closeUpsellUnauthModal:()=>{}}),Object.freeze({IS_SEASONAL:"seasonal",TERMS:"terms",COUNTRY:"country",EDITORIAL_INDEX:"editorial",SHOULD_MOCK:"shouldMock",EMPTY_HERO_BANNER_MOCK:"emptyHeroBanner",TRENDS_PRESET:"trendsPreset",ADVERTISER_ID:"advertiserId",END_DATE:"endDate",SELECTED_END_DATE:"selectedEndDate",AGE_BUCKET:"ageBucket",GENDER:"gender",LOOK_BACK_WINDOW:"lookbackWindow",COUNTS_TYPE:"countsType",DATE_RANGE:"dateRange",AGGREGATION_LEVEL:"aggregationLevel",SORT_BY:"sortBy",SORT_ORDER:"sortOrder",L1_INTEREST_IDS:"l1InterestIds",L2_INTEREST_IDS:"l2InterestIds",L3_INTEREST_IDS:"l3InterestIds",KEYWORDS_TO_EXCLUDE:"keywordsToExclude",KEYWORDS_TO_INCLUDE:"keywordsToInclude",RANKING_METHOD:"rankingMethod",AGE_DETAILS_PAGE:"ageDetailsPage",GENDER_DETAILS_PAGE:"genderDetailsPage",TOP_TRENDS:"topTrends",MOMENTS:"moments",HAS_PREDICTIONS:"hasPredictions",SHOW_PREDICTION:"showPrediction",URL_PARAM_UTM_VALUES:Object.freeze({UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_CONTENT:"utm_content",UTM_TERM:"utm_term",UTM_CREATIVE:"utm_creative"}),EVENT:"event",GRAPH_EVENT:"graphEvent",PRODUCT_CATEGORIES:"product_categories",PAGE_NUMBER:"page",TOPIC_INTEREST_IDS:"topicInterestIds",PARENT_PRODUCT_CATEGORY:"parentProductCategory",SHOW_SIDE_NAV:"showSideNav",VIEW:"view",TAB:"tab",SHOW_UNAUTH_MODAL:"showUnauthModal",NEXT_URL:"nextUrl"}),t(632321),t(449798),t(534955),t(871211);let o=(e,a)=>{let t=(0,n.useRef)(void 0),o=()=>{t.current&&clearTimeout(t.current)};return(0,n.useEffect)(()=>o,[]),n=>{o(),t.current=setTimeout(()=>{e(n)},a)}}},105367(e,a,t){t.d(a,{A:()=>r});var n=t(296540),o=t(278106),l=t(267722),i=t(144837),s=t(221077);let r=function(e,a,t){let r=(0,o.Zp)(),{search:_,pathname:d="/"}=(0,o.zy)(),u=(0,n.useMemo)(()=>new URLSearchParams(_),[_]),p=n=>{let o="reset"!==a?(0,s.A)(window.location.search):{},_=(0,l.Wm)({..."resetWithoutRefresh"===a?{}:o,[e]:n});if(!a)return;let u=t?`${t}`:d,p=(0,i.A)(u,{..._});("push"===a||"resetWithoutRefresh"===a)&&r(p),"replace"===a&&r(p,{replace:!0}),"reset"===a&&(window.location.href=p),"replaceWithoutRefresh"===a&&o[e]!==n&&window.history.replaceState(null,"",p)};return function(a){"function"==typeof a?p(a((0,l.B0)(u.get(e)))):p(a)}}},267722(e,a,t){t.d(a,{Bz:()=>s,B0:()=>i,Wm:()=>l});var n=t(618475);let o=["US","CA","IT+ES+PT+GR+MT","IT","ES","DE+AT+CH","DE","GB+IE","FR","SE+DK+FI+NO","NL+BE+LU","PL+RO+HU+SK+CZ","MX+AR+CO+CL","CO","AR","MX","BR","AU+NZ","JP","ID","IN","MY","PH","TH","SA","EG","TR","KR","AE+SA+KW+QA+OM+BH+EG+IQ+DZ","IL+NG+PK+ZA+TR+MA+IN","CR+DO+EC+GT+PE","CY+CZ+GR+HU+MT+PL+RO+SK"];n.Ay.FILTER_INTEREST_IDS_PARAM_KEY,n.Ay.FILTER_AGE_IDS_PARAM_KEY,n.Ay.FILTER_GENDERS_PARAM_KEY,Object.freeze({UTM_SOURCE:"utm_source"});let l=e=>{let a={};for(let t in e){let n=e[t];null!==t&&""!==t.trim()&&null!=n&&""!==n.toString().trim()&&(a[t]=n)}return a},i=e=>e&&null!=e&&/^\d+$/.test(e.toString())?parseInt(e.toString(),10):e,s=(e,a)=>o.includes(e)?a[e]:void 0},320384(e,a,t){t.d(a,{M_:()=>s,SS:()=>o,by:()=>i,lq:()=>n});let n=e=>/instagram/i.test(e||""),o=e=>n(e)||/facebook/i.test(e||"")||/line/i.test(e||"")||/wechat/i.test(e||""),l="[Pinterest/Android]",i=e=>(e||"").includes("[Pinterest/iOS]")||(e||"").includes(l),s=e=>(e||"").includes(l)},906474(e,a,t){function n(e,a){let{sessionTimestamps:t}=e,n=Date.now()-864e5*a;return t.filter(e=>e>=n).length}function o(e,a){let t=[...e,Date.now()];return t.length>a?t.slice(-a):t}t.d(a,{A:()=>n,c:()=>o})},387663(e,a,t){t.d(a,{X:()=>s,y:()=>r});var n=t(960926),o=t(58882),l=t(906474),i=t(441472);let s=()=>{try{let e=(0,i.y1)().getItem(n.hc);if(!e)return(0,o.Cj)();let{ts:a,sessionTimestamps:t}=e;if("number"==typeof a&&Array.isArray(t)&&t.length>0&&t.every(e=>"number"==typeof e))return{ts:a,sessionTimestamps:t};throw Error("Invalid revisitation data")}catch(e){return(0,o.Cj)()}},r=e=>e&&e.sessionTimestamps&&!(e.sessionTimestamps.length<1)&&e.ts?new Date().getTime()-e.ts>o.H3?{state:{...e,sessionTimestamps:(0,l.c)(e.sessionTimestamps,o.eb)},wasUpdated:!0}:{state:e,wasUpdated:!1}:{state:(0,o.Cj)(),wasUpdated:!0}},684078(e,a,t){t.d(a,{A:()=>o});var n=t(622165);function o(e){let{expName:a,anyEnabled:t,group:o}=function({experimentsClient:e,skipActivation:a}){let{checkExperiment:t}=e,n=t("web_masonry_v2",{dangerouslySkipActivation:a});return n.group?{expName:"web_masonry_v2",...n}:{expName:"",anyEnabled:!1,group:""}}({experimentsClient:(0,n.A)(),skipActivation:e?.skipActivation??!1});return{expName:a,anyEnabled:t,group:o,isMeasureAllEnabled:"enabled_measure_all"===o||"enabled_measure_all_impression_fix"===o,isImpressionFixEnabled:"control_impression_fix"===o||"enabled_impression_fix"===o||"enabled_measure_all_impression_fix"===o}}},706397(e,a,t){t.d(a,{bi:()=>O,g$:()=>I,kF:()=>h});var n=t(296540),o=t(534955);let l=["ar","he"];var i=t(632321),s=t(684078),r=t(141716),_=t(622165),d=t(568677),u=t(990213),p=t(480819),c=t(407242),E=t(275386),g=t(646844),m=t(840085);let S=0,h=()=>S,T={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},b=({events:e,startTime:a,endTime:t})=>e?.filter(e=>e>=a&&e<=t)||[];function O({carouselData:e,closeupImpressionType:a,closeupNavigationType:t,componentType:h,contextLogData:O,clientTrackingParams:I,duploShouldTrackPinEvents:v,elementType:y,impressionAuxFields:w,inImpressionExp:N,impressionType:A,impressionsFramework:L,isPaused:C,loggingId:R,objectIdStr:P,slotIndex:D,trackCarousel:M,viewData:f,viewParameter:U,viewType:G,isPromoted:k,storyPinProductEventData:x}){let{logContextEvent:F}=(0,i.o)(),{logMrcVideoAdEventOnPlay:H}=(0,u.y)(),{addImpression:W}=(0,p._1)()||{},{logStat:B}=(0,c.xI)(),V=(0,E.A)(),K=(0,d.qJ)(),{isRTL:q}=(()=>{let{locale:e}=(0,o._8)();return{isRTL:(0,n.useMemo)(()=>{let a=(e??"").split("-")[0];return l.includes(a)},[e])}})(),{checkExperiment:Y}=(0,_.A)(),$=L||r.A,X=(0,n.useRef)(null),j=(0,n.useRef)(e=>{});j.current=n=>{let o=T[A],l=o.idType,i={clientTrackingParams:I,endTime:n.endTime,[l]:R,slotIndex:D,time:n.startTime,renderDuration:n.endTime-n.startTime,type:a,...w,forcedExit:"removed"===n.forcedExit?0:void 0};if("Pin"===A){S+=1;let e=[],a=n.visibleEvents||new Map,t=n.hiddenEvents||new Map;(w&&w.isPromoted||k)&&[1,50,80,2,102].forEach(o=>{let l=b({events:a.get(o),startTime:n.startTime,endTime:n.endTime}),i=b({events:t.get(o),startTime:n.startTime,endTime:n.endTime});l.forEach(a=>{e.push({type:o,time:a||0,visible:!0})}),i.forEach(a=>{e.push({type:o,time:a||0,visible:!1})})}),i={...i,pinCellWidth:n.pinCellWidth||0,pinCellHeight:n.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,a)=>e.time-a.time)};let o=Y("web_imp_col_data").anyEnabled;if(X.current&&o){let e=X.current.getBoundingClientRect(),a=window.scrollX||document.documentElement.scrollLeft,t=e.left+a;O={...O||{},number_of_columns:i.windowWidth&&i.pinCellWidth?Math.round((i.windowWidth-(q&&K?0:V))/i.pinCellWidth):null},i.columnIndex=i.pinCellWidth?Math.round((t-(q&&K?0:V))/i.pinCellWidth):void 0}w?.nearDupSignature&&W&&h&&[13007,13176,68].includes(h)&&W(w.nearDupSignature)}let s={component:h,object_id_str:P,view_type:G,view_data:f||{},view_parameter:U};if(M)e&&M&&F({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...i,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...s,aux_data:{...O}});else{let e={clientTrackingParams:I,event_type:o.eventType,...s,element:y,event_data:{[o.impressionType]:"Story"===A?i:[i],...x?{storyPinProductEventData:x}:{}},aux_data:{closeup_navigation_type:t,...O}};F(e),H(e)}v&&B("log_pin_impression")};let{expName:z,group:Q}=(0,s.A)({skipActivation:!0}),Z=(0,d.Ay)(),J=(0,m.AJ)(),{isAuthenticated:ee}=(0,o._8)(),ea=(0,n.useCallback)(()=>{let e=!1;try{let{current:a}=X;if(a instanceof HTMLElement&&(!k||a.getElementsByTagName("img").length>0)){let t=$.start(a);t.onExitViewport(j.current).setDebugId(R||"unknown"),v&&t.onEnterViewport(()=>{B("log_pin_impression_track_enter_viewport")}),e=!0,Q&&(0,g.GV)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:Z,experimentName:z,group:Q,handlerId:J,isAuthenticated:ee,slotIndex:D??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}v&&B("log_pin_impression_track",{didStartTracking:e})},[X.current]);return(0,n.useEffect)(()=>(N&&!$.inExperiment&&$.setExperimentStatus(!0),C||ea(),()=>{let{current:e}=X;e instanceof HTMLElement&&(!k||e.getElementsByTagName("img").length>0)&&$.stop(e)}),[C,ea]),X}let I=({children:e,...a})=>e({impressionTrackerRef:O(a)})},290013(e,a,t){t.d(a,{K:()=>g,z:()=>l});var n=t(684059),o=t(646844);let l="nic_v4",i=`${l}=1a`,s=`${l}=1b`,r=[i,s],_=["invite_code","invite","board_invite_code","sender"],d=null,u=e=>!!_.find(a=>e.includes(a)),p=e=>{let a;return e.pathname.includes("/pin/")&&!u(e.search)&&(a=e.search,!r.find(e=>a.includes(e)))},c=async e=>{let{resource_response:a}=await n.A.create("InviteSocialTrackingParamNonInviteResource",{user_id:e}).callCreate();if(!a)return(0,o.GV)(`${l}.social_tracking_pin_non_invite.no_resource_response`),"";{let e=encodeURIComponent(a.data);return(0,o.GV)(`${l}.social_tracking_pin_non_invite.encrypted.${e?"true":"false"}`),e}},E=(e,a,t=!1,n)=>{if(!p(e))return;let r=t?"mweb":"web";if(!a)return void(0,o.GV)(`${r}.${l}.social_tracking_pin_non_invite.insert.no_encrypted_id`);(0,o.GV)(`${r}.${l}.social_tracking_pin_non_invite.insert.attempt`);try{var _;let d,u=(_=t||!1,d=e.search?"&":"?",e.pathname+e.search+(d+(_?s:i)+a));(0,o.GV)(`${r}.${l}.social_tracking_pin_non_invite.insert.success`),n(u)}catch{(0,o.GV)(`${r}.${l}.social_tracking_pin_non_invite.insert.caught_exception`)}},g=(e,a,t,n,i)=>{let s=t?"mweb":"web";(0,o.GV)(`${s}.${l}.social_tracking_pin_non_invite.attempt`);try{let r;!t&&n&&p(e)?((0,o.GV)(`${s}.${l}.social_tracking_pin_non_invite.search_string_eligible`),((e,a,t=!1,n)=>{d?E(e,d,t,n):(async()=>{let o=await c(a);d=o,E(e,o,t,n)})()})(e,a,t,i)):(r=e.search,!u(r)&&!r.includes("sender")&&r.includes(l)&&(0,o.GV)(`${s}.${l}.social_tracking_pin_non_invite.search_string_land`))}catch{(0,o.GV)(`${s}.${l}.social_tracking_pin_non_invite.caught_exception`)}}},102003(e,a,t){t.d(a,{A:()=>u});var n=t(278106),o=t(290013),l=t(104735),i=t(534955),s=t(125212),r=t(743250),_=t(404712),d=t(646844);function u(){let e,{isBot:a,isSocialBot:t,referrerFromCookie:u,referrerFromHeader:p,countryFromHostName:c,countryFromIp:E,regionFromIp:g,isAuthenticated:m}=(0,i._8)(),S=(0,n.zy)(),h=(0,_.A)(),T=new URLSearchParams(S.search),b=!a&&!!T.get("utm_pai"),O=T.get("utm_source"),I=!a&&!t&&(0,l.hasInviteCode)(S),v=(0,r.A)({countryFromHostName:c||"",countryFromIp:E||"",regionFromIp:g||"",isAuthenticated:m}),y=p||v&&u||"";e=h||!v?y:(0,s.G2)(y);let w=!1,N=!a&&!t&&O&&["email",String(31)].includes(O),A=!a&&!t&&O&&["fb"].includes(O),L="offsite"===O,C=!a&&!t&&!!(e&&(/facebook/.test(e)||/fb/.test(e))),R=!a&&!t&&!!(e&&(/twitter/.test(e)||/tw/.test(e)));I&&(0,d.GV)("unauth.entry_channel.invite_code",{sampleRate:1}),N&&(0,d.GV)("unauth.entry_channel.email_utm_source",{sampleRate:1}),A&&(0,d.GV)("unauth.entry_channel.social_media_utm_source_fb",{sampleRate:1}),L&&(0,d.GV)("unauth.entry_channel.offsite_utm_source",{sampleRate:1}),C&&(0,d.GV)("unauth.entry_channel.social_media_referer_fb",{sampleRate:1}),R&&(0,d.GV)("unauth.entry_channel.social_media_referer_twitter",{sampleRate:1}),w=(0,s.Eb)(e);let P=!a&&w,D=!!T.get(o.z),M=!!T.get("twa_type")||e&&e.startsWith("android-app://com.pinterest.twa"),f=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_admin","utm_id","utm_mail","utm_swu"].some(e=>null!==T.get(e))||!!e||D||M;return{isPaid:b,isInvite:I,utmSource:O,referrer:e,isSocial:I,isDirect:!a&&!b&&!I&&!P&&!f,isSEO:P,isBrowserStorageAllowed:v,isOffsite:L,isBot:a||t}}},125212(e,a,t){t.d(a,{Eb:()=>g,G2:()=>m,VO:()=>T});var n=t(104735),o=t(445349),l=t(104456);let i="BING",s="GOOGLE",r="YAHOO",_="YANDEX",d="RAKUTEN",u="NAVER",p="AMP_CACHE",c="DUCKDUCKGO",E=[s,i,r,_,d,u,p,c];function g(e){return E.includes(function(e){let{hostname:a}=(0,l.A)(e,!0);if(a&&e){if(a.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return s;else if(a.includes("bing."))return i;else if(a.includes("yahoo."))return r;else if(a.includes("yandex."))return _;else if(a.includes("rakuten."))return d;else if(a.includes("naver."))return u;else if(a.includes("duckduckgo."))return c;else if(a.includes(".cdn.ampproject.org"))return p}return""}(e))}function m(e){return e||"undefined"!=typeof document&&document.referrer||""}let S=e=>"/"!==e[e.length-1]?`${e}/`:e,h=e=>{let a=S(e),t=(0,n.createRouterLocation)({url:a});return(0,n.isCloseupPage)(t)?"PIN":(0,n.isBoardPage)(t)?"BOARD":(0,o.A)(t)?"PROFILE":(0,n.isAnyTodayPage)(t)?"TODAY":(0,n.isAnyIdeasPage)(t)?"IDEA":(0,n.isAnyShoppingPage)(t)?"SHOPPING":"UNKNOWN"},T=({country:e,language:a,isBot:t,hostname:n,pathname:o})=>({domain:n,country:e,language:a,currentUrl:o,pageType:h(o),referrer:document.referrer,isBot:t,links:(({selector:e,skipExternal:a})=>{let t=Array.from(document.querySelectorAll(e)),n={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},o=new Set;return t.forEach(e=>{let t=e.getAttribute("href");if(!t||t.startsWith("#")||a&&t.startsWith("http")&&!t.includes(window.location.hostname))return;let l=S(t);if(o.has(l))return;o.add(l);let i=h(l);"PIN"===i?n.pin.push(l):"BOARD"===i?n.board.push(l):"PROFILE"===i?n.user.push(l):"TODAY"===i?n.today.push(l):"IDEA"===i?n.idea.push(l):"SHOPPING"===i&&n.shopping.push(l)}),n})({selector:"a[href]",skipExternal:!0})})},233284(e,a,t){t.d(a,{F:()=>l,I:()=>o});var n=t(256623);function o(e,a){(0,n.A)("ðŸŽ¯ ENGAGEMENT_SCORE_CALCULATED",{trigger:e,...a})}function l(e,a){(0,n.A)("desktop"===e?"DESKTOP_UPSELL_DECISION":"MOBILE_UPSELL_DECISION",a)}},364270(e,a,t){t.d(a,{h:()=>l,w:()=>o});var n=t(182835);function o({PES:e,NUS:a,conversionIntentLevel:t,triggerAction:o,deviceType:l}){(0,n.PM)("engagement_score.calculated",{engagement_score:e,upsell_negative_score:a,user_intent_bucket:t,upsell_type_tag:"conversion",trigger_action:o,device_type:l})}function l({upsellType:e,decision:a,intentLevel:t,PES:o,NUS:l,experimentVariant:i}){(0,n.PM)("upsell.decision_with_intent",{upsell_type:e,decision:a,intent_level:t,pes:o,nus:l,experiment_variant:i})}},512581(e,a,t){t.d(a,{Ay:()=>L,kX:()=>v,mz:()=>A,vp:()=>h});var n=t(296540),o=t(671468),l=t(278106),i=t(126439),s=t(320384),r=t(706397),_=t(102003),d=t(534955),u=t(693117),p=t(511909),c=t(568677),E=t(192102),g=t(646844);let m=Date.now(),S=()=>(0,o.d4)(e=>e.upsell?.mWebSignupModal.modal.isShown??!1),h=()=>(0,o.d4)(e=>e.upsell?.modal),T=()=>(0,r.kF)(),b=()=>Date.now()-m,O=()=>(0,o.d4)(e=>e.upsell?.mWebSignupModal.isUnauthSharingModalsShown??!1),I=()=>(0,o.d4)(e=>!!e.upsell?.mWebSignupModal.modalHasShown),v=()=>(0,o.d4)(e=>e.upsell?.mWebSignupModal),y=()=>{let e=(0,d._8)(),a=(0,_.A)(),t=(0,c.Ay)(),o=(0,l.zy)();return(0,n.useMemo)(()=>(0,p.O$)(e,a,t,o.pathname),[e,a,t,o.pathname])},w=Object.freeze(["CO","ID"]),N=e=>{if(!(0,s.SS)(e))return!1;let a=(0,u.V2)();return a.getItem(i.Ng)||((0,g.GV)("mobile_signup_modal.rules.suppress_for_social_in_app_browser"),a.setItem(i.Ng,"1")),!0},A=({isModalShown:e,isUnauthSharingModalsShown:a,modalHasShown:t,country:n,userAgent:o})=>!e&&!(a||t&&w.includes(n)||(0,E.K)()||N(o));function L(){let e,a,t,l,i=S(),s=(0,o.d4)(e=>e.upsell?.mWebSignupModal.modal),r=(0,o.d4)(e=>e.upsell?.mWebSignupModal.upsellEligibleNavigationCount),_=O();return{isModalShown:i,modal:s,upsellEligibleNavigationCount:r,isUnauthSharingModalsShown:_,modalHasShown:I(),sessionContext:y(),isUpsellEnabledGlobally:(e=S(),a=O(),t=I(),l=y(),(0,n.useCallback)(()=>!e&&!(({isUnauthSharingModalsShown:e,modalHasShown:a,sessionContext:t})=>{if(!t)return!1;let{country:n,userAgent:o}=t;return e||a&&w.includes(n)||(0,E.K)()||N(o)})({isUnauthSharingModalsShown:a,modalHasShown:t,sessionContext:l}),[e,a,t,l])),getPinImpressionCount:T,getSessionDuration:b}}},799596(e,a,t){t.d(a,{Dw:()=>o,F_:()=>r,GY:()=>n,PO:()=>l,_k:()=>s,fI:()=>_,vR:()=>i});let n="RECORD_NAVIGATIONAL_PAGE",o="SET_INITIAL_SESSION_CONTEXT",l="UPDATE_LATEST_L1_VERTICAL",i="RESET_UPSELL_TRIGGER_STATE",s="RECORD_SOCIAL_PIN_LANDING_PAGE",r="TRIGGER_SOCIAL_DELAY_MODAL",_="TRIGGER_SOCIAL_SCROLL_MODAL"},627203(e,a,t){t.d(a,{JR:()=>L,tj:()=>C,wz:()=>R});var n=t(104735),o=t(445349),l=t(233284),i=t(364270),s=t(799596),r=t(556596);let _="dweb_eoq_q3_standard",d="dweb_eoq_q3_advanced",u="mweb_eoq_q3_standard",p="mweb_eoq_q3_advanced",c="mweb_eoq_q4_advanced_ucan",E="mweb_eoq_q4_emergency_ucan",g="mweb_eoq_q4_advanced_non_ucan",m="mweb_eoq_q4_emergency_non_ucan",S="dweb_eoq_q4_advanced_ucan",h="dweb_eoq_q4_emergency_ucan",T="dweb_eoq_q4_advanced_non_ucan",b="dweb_eoq_q4_emergency_non_ucan",O=[{bundleId:"dweb_eoq_q3_standard",experimentKey:_,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}}}},{bundleId:"dweb_eoq_q3_advanced",experimentKey:d,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}}}},{bundleId:"mweb_eoq_q3_standard",experimentKey:u,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}}}},{bundleId:"mweb_eoq_q3_advanced",experimentKey:p,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_ucan",experimentKey:c,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_ucan",experimentKey:E,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_non_ucan",experimentKey:g,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_non_ucan",experimentKey:m,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"dweb_eoq_q4_advanced_ucan",experimentKey:S,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_advanced_non_ucan",experimentKey:T,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_ucan",experimentKey:h,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_non_ucan",experimentKey:b,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}}];function I(e,a){let t=O.filter(t=>{if(!t.active||!t.overrides[e])return!1;switch(t.experimentKey){case _:return a("dweb_eoq_q3_standard").anyEnabled;case d:return a("dweb_eoq_q3_advanced").anyEnabled;case u:return a("mweb_eoq_q3_standard").anyEnabled;case p:return a("mweb_eoq_q3_advanced").anyEnabled;case c:return a("mweb_eoq_q4_advanced_ucan").anyEnabled;case E:return a("mweb_eoq_q4_emergency_ucan").anyEnabled;case g:return a("mweb_eoq_q4_advanced_non_ucan").anyEnabled;case m:return a("mweb_eoq_q4_emergency_non_ucan").anyEnabled;case S:return a("dweb_eoq_q4_advanced_ucan").anyEnabled;case h:return a("dweb_eoq_q4_emergency_ucan").anyEnabled;case T:return a("dweb_eoq_q4_advanced_non_ucan").anyEnabled;case b:return a("dweb_eoq_q4_emergency_non_ucan").anyEnabled;default:return!1}});return t[t.length-1]?.overrides[e]}let v=e=>({id:e.id,evaluate:function({ruleId:e,baseEvaluateFunction:a}){return t=>{let{checkExperiment:n,session:o}=t,l=n&&I(e,n)?.evaluateContextOverride||{},i=l[o?.channel??"default"]||l.default||{};return a((0,r.A)(t,i))}}({ruleId:e.id,baseEvaluateFunction:e.evaluate}),getNextState:function({ruleId:e,baseNextStateFunction:a}){return({action:t,state:n,decision:o})=>{let l=a({action:t,state:n,decision:o});if(!("payload"in t&&"object"==typeof t.payload&&null!==t.payload&&"checkExperiment"in t.payload))return l;let i=n.initialSessionContext||("sessionContext"in t.payload?t.payload.sessionContext:void 0),s=I(e,t.payload.checkExperiment)?.stateOverride||{},_=s[i?.channel??"default"]||s.default||{};return 0===Object.keys(_).length?l:(0,r.A)(l,_)}}({ruleId:e.id,baseNextStateFunction:e.getNextState})});var y=t(240338);let w=["enabled","enabled_no_legal","enabled_copy_2"],N=["enabled_copy_2_no_legal","enabled_copy_2_with_legal"],A=(e,a)=>{let t={enabled_1:["high","medium"],enabled_2:["high"],enabled_3:["medium"],enabled_4:["medium","low"]}[a];return!!t&&t.includes(e||"unknown")},L={shouldShowRelatedPinsGradientUpsell:v({id:"desktop_related_pins_gradient_upsell_trigger",evaluate:({relatedPinsGradientUpsellEverShown:e,checkExperiment:a})=>{if(e)return!1;let t=a?.("ce_dweb_unauth_related_pins_limit");return!!t?.anyEnabled},getNextState:({state:e})=>({...e,showRelatedPinsGradientUpsell:!0,relatedPinsGradientUpsellEverShown:!0})}),shouldShowCloseupNavigationalModal:v({id:"closeup_navigational_modal_trigger",evaluate:({pinViewCount:e,navigationalPagesUpsellSeen:a,checkExperiment:t})=>!t?.("pc_no_navigational_upsell").anyEnabled&&(e??0)>=4&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_1",container:"closeup",reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowSaveModal:v({id:"save_modal_trigger",evaluate:()=>!0,getNextState:({action:e,state:a})=>({...a,pinSaveCount:a.pinSaveCount+1,pinId:e.payload.pinId,attributionLabel:e.payload.attributionLabel,showSaveModal:!0,modal:{isShown:!0,displayProps:{attributionLabel:e.payload.attributionLabel,container:"save",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",savePinId:e.payload.pinId,signupFlow:{type:"signup"},source:"saveButtonExp"}}})}),shouldShowNavigationalModal:v({id:"desktop_navigational_modal_trigger",evaluate:({uniqueNavigationalPagesSeen:e=[],navigationalPagesUpsellSeen:a,navigationalPagesViewThresholdDesktop:t,checkExperiment:n})=>!n?.("pc_no_navigational_upsell").anyEnabled&&e.length>=(t??4)&&!a,getNextState:({state:e,action:a})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_${a.payload.containerPage}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowNavigationalModalIntentBased:v({id:"desktop_navigational_modal_intent_trigger",evaluate:({navigationalPagesUpsellSeen:e,engagementScore:a,checkExperiment:t})=>{let n=t?.("engagement_score_v0_dweb");if(!n?.anyEnabled||e)return!1;let{conversionIntentLevel:o,PES:s,NUS:r}=a||{},_=A(o,n.group);return(0,l.F)("desktop",{variant:n.group,decision:_?"SHOW":"SKIP",intentLevel:o,PES:s||0,NUS:r||0,reason:_?`Intent ${o} in allowed list`:`Intent ${o} NOT in allowed list`}),(0,i.h)({upsellType:"navigation_desktop",decision:_?"show":"skip",intentLevel:o||"unknown",PES:s||0,NUS:r||0,experimentVariant:n.group}),_},getNextState:({state:e,action:a})=>{let{conversionIntentLevel:t,PES:n,NUS:o}=e.engagementScore||{};return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_intent_${t}_pes_${n||0}_nus_${o||0}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0}}}),shouldShowSignupModalOnCloseUpClick:v({id:"closeup_modal_trigger",evaluate:({modal:e,clickCloseUp:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickCloseUp:!0})}),shouldShowSignupModalOnClickContextMenuSaveButton:v({id:"context_menu_save_button_trigger",evaluate:({modal:e,clickContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let t;return t=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:t},clickContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnClickCloseupSaveButton:v({id:"closeup_save_button_trigger",evaluate:({modal:e,clickCloseUpContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let t;return t=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:t},clickCloseUpContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnContextMenuDownloadClick:v({id:"desktop_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:t})=>!!((e||a)&&!t?.isShown),getNextState:({action:e,state:a})=>{let t;return t=e.payload.inDwebSwapDownloadUpsellExp?{signupFlow:{type:"login"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"lopDownloadUpsell",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"lopDownloadUpsell"}:{signupFlow:{type:"signup"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:t},clickContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnCloseupDownloadClick:v({id:"closeup_download_button_trigger",evaluate:({limitReached:e,modal:a})=>!!(e&&!a?.isShown),getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId}},clickCloseUpContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource})}),shouldShowSignupModalOnFollowButtonClick:v({id:"follow_button_trigger",evaluate:({modal:e,clickFollowButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",container:e.payload.isContextualFollowEnabled?"follow":"upsellRules_unspecified_container",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:e.payload.isContextualFollowEnabled?"followButton":void 0}},clickFollowButton:!0})}),shouldShowSignupModalOnFollowingButtonClick:v({id:"following_button_trigger",evaluate:({modal:e,clickFollowingButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_following",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowingButton:!0})}),shouldShowSignupModalOnFollowersButtonClick:v({id:"followers_button_trigger",evaluate:({modal:e,clickFollowersButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_followers",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowersButton:!0})}),shouldShowLoginModalOnCommentComposerClick:v({id:"comment_composer_trigger",evaluate:({modal:e,clickCommentComposerUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"tap_unauth_comment_composer",container:"closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"commentComposer"}},clickCommentComposerUpsell:!0})}),shouldShowLoginModalOnRelatedPinOpenLinkClick:v({id:"related_pin_open_link_trigger",evaluate:({modal:e,clickRelatedPinOpenLinkUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"click_context_menu_related_pin_right_click_open_link_button",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickRelatedPinOpenLinkUpsell:!0})}),shouldShowLoginModalOnPinLinkClick:v({id:"pin_link_trigger",evaluate:({modal:e,pinLinkClickCount:a=0})=>!e?.isShown&&(2===a||a%5==0),getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"pinLinkClickHandler_tier1",container:"hybrid_clickthrough",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickPinLinkCount:e.payload.count})}),shouldShowSocialPinLandingModal:v({id:"social_pin_landing_modal_trigger",evaluate:({inviter:e,socialPinLandingModalShown:a,checkExperiment:t})=>{if(!e||a)return!1;let n=t?.("ce_dweb_unauth_splp_blocking").anyEnabled,o=t?.("ce_dweb_unauth_splp_blocking_no_delay").anyEnabled,l=t?.("ce_dweb_unauth_splp_blocking_3s").anyEnabled;return!!(n||o||l)},getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.type===s.F_?`delay_${e.payload.containerPage}`:`scroll_${e.payload.containerPage}`,container:e.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},socialPinLandingModalShown:!0})}),shouldShowScrollingBox:{id:"desktop_scrolling_box_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},C={shouldShowSaveEducationPopover:v({id:"mobile_save_education_popover_trigger",evaluate:({saveEducationPopoverEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:t}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!t?.startsWith("enabled_group_board")},getNextState:({state:e})=>({...e,showSaveEducationPopover:!0,saveEducationPopoverEverShown:!0})}),shouldShowReplyToSenderSheet:v({id:"mobile_reply_to_sender_sheet_trigger",evaluate:({replyToSenderSheetEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:t}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!t?.startsWith("enabled_reply_to_sender")},getNextState:({state:e})=>({...e,showReplyToSenderSheet:!0,replyToSenderSheetEverShown:!0})}),shouldAllowUnauthSave:v({id:"mobile_unauth_save_quota_check",evaluate:({isPPMAndroidUnauthExperience:e,isFromUnauthContextMenu:a,currentUnauthSaves:t=0,mobileUnauthSaveThreshold:n})=>!a&&!e&&t<(n??2),getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:e.payload.headingType,trigger:{attributionLabel:"extended_save_out_of_quota"===e.payload.headingType?"click_save_button_with_max_unauth_saves":e.payload.attributionLabel||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageNavigationalModal:v({id:"mobile_main_pin_image_modal",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,isModalCurrentlyShown:t,learningUpsellScenario:n,forceShowModal:o})=>{let l=n&&a&&!t&&(e?.("mweb_unauth_main_learning_pin_full_page").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced_row").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency_row").anyEnabled||e?.("mweb_q2_mau_push_pc_eu_safe").anyEnabled);return n&&(o||!!l)},getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal?.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:"none",trigger:{attributionLabel:"navigation_main_pin_image_click",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageAppUpsell:{id:"mobile_main_pin_app_upsell_purple_banner",getNextState:({state:e})=>e,evaluate:({learningUpsellScenario:e,hasConversionUpsell:a,isLearningAppUpsellShown:t})=>a||!e?{shouldToggleAppUpsell:!1,currentlyShowing:!1,newState:!1}:{shouldToggleAppUpsell:!0,currentlyShowing:t,newState:!t}},shouldShowNavigationUpsell:v({id:"mobile_navigation_upsell",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:t,isNavigationFromSwipe:n,currentNavigationCount:o,hasSeenModal:l,pageThreshold:i,isWashDismissible:s,canShowSignupModalOnRouteChange:r,navigationalPagesViewThresholdMobile:_,checkExperiment:d})=>{if(d?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let u=_||i||4;if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!(e&&!n))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let p=!!t&&!!d&&(0,y.A)(d,t),c=d?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",E="control"===c||"enabled_copy_2_no_legal"===c||"enabled_copy_2_with_legal"===c;if(!(t&&r?.(t,p)))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(!((o??0)>=u)||l)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let g=N.includes(c),m=d?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",S=w.includes(m),h=d?.("mweb_feature_upsell_copy_visual_combination_v2"),T=h?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_${u}_${o}`,allowCloseOnOutsideClick:s,headingType:E?g?"mweb_feature_upsell_copy_visual_combination_v4":"none":S?"mweb_feature_upsell_copy_visual_combination_v3":T?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowNavigationUpsellIntentBased:v({id:"mobile_navigation_upsell_intent",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:t,isNavigationFromSwipe:n,hasSeenModal:o,canShowSignupModalOnRouteChange:s,engagementScore:r,checkExperiment:_})=>{let d=_?.("engagement_score_v0_mweb");if(!d?.anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let u=!!t&&!!_&&(0,y.A)(_,t),p=_?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",c="control"===p||"enabled_copy_2_no_legal"===p||"enabled_copy_2_with_legal"===p;if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!e||n||!t||!s?.(t,u))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(o)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let{conversionIntentLevel:E,PES:g,NUS:m}=r||{},S=A(E,d.group);if((0,l.F)("mobile",{variant:d.group,decision:S?"SHOW":"SKIP",intentLevel:E,PES:g||0,NUS:m||0,reason:S?`Intent ${E} in allowed list`:`Intent ${E} NOT in allowed list`}),(0,i.h)({upsellType:"navigation_mobile",decision:S?"show":"skip",intentLevel:E||"unknown",PES:g||0,NUS:m||0,experimentVariant:d.group}),!S)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let h=N.includes(p),T=_?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",b=w.includes(T),O=_?.("mweb_feature_upsell_copy_visual_combination_v2"),I=O?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_intent_${E}_pes_${g||0}_nus_${m||0}`,allowCloseOnOutsideClick:!0,headingType:c?h?"mweb_feature_upsell_copy_visual_combination_v4":"none":b?"mweb_feature_upsell_copy_visual_combination_v3":I?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowOnLandUpsell:v({id:"mobile_on_land_upsell",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,hasSeenNavUpsell:t,location:l,userAgent:i,showUnauthMwebSocialDefaultModalUpsell:s,isSocialInAppBrowser:r,shouldTriggerOnLand:_=!1})=>{let d;if(e?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let u=!!l&&!!e&&(0,y.A)(e,l);if(!a||t||!(l&&((0,n.isCloseupPage)(l)||(0,n.isBoardPage)(l)||(0,o.A)(l)||(0,n.isSearchPage)(l)||(0,n.hasInviteCode)(l)||u&&(0,n.isAnyIdeasPage)(l))))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let p=!(r?.(i)&&e?.("mweb_unauth_social_iab_upsell_boost_experiment",{dangerouslySkipActivation:!0}).anyEnabled)&&s,c=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",E="control"===c||"enabled_copy_2_no_legal"===c||"enabled_copy_2_with_legal"===c;if(!s&&!_)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let g=N.includes(c),m=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",S=w.includes(m),h=p?null:e?.("mweb_feature_upsell_copy_visual_combination_v2"),T=h?.anyEnabled??!1;if("social"==(d=p?"social":E?g?"mweb_feature_upsell_copy_visual_combination_v4":"none":S?"mweb_feature_upsell_copy_visual_combination_v3":T?"mweb_feature_upsell_copy_visual_combination_v2":"none")&&e){let a=e("ce_mweb_visual_plp_upsell");if(a.anyEnabled)switch(a.group){case"enabled_1":d="social_visual_1";break;case"enabled_2":d="social_visual_2";break;case"enabled_3":d="social_visual_3"}}return{shouldShowModal:!0,shouldIncrementCount:!0,showUnauthMwebSocialUpsell:p,modalConfig:{reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation_0",navigationTriggeredUpsell:{newLocation:l,oldLocation:l},headingType:d}}},getNextState:({state:e,decision:a})=>{let{modalConfig:t}=a;return{...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:t?.headingType,trigger:{attributionLabel:t?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:null}}}}}),shouldShowSignupModalOnContextMenuDownloadClick:v({id:"mobile_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:t})=>(e||a)&&!t?.isShown,getNextState:({action:e,state:a})=>{let{inMwebDownloadCTAExp:t,showDownloadCloseupIcon:n,attributionLabelSource:o}=e.payload,l={trigger:{attributionLabel:`click_${o}_download_button`,reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},headingType:t||n?"download_limit_reached":"none"};return{...a,mWebSignupModal:{...a.mWebSignupModal,modal:{isShown:!0,displayProps:l,pinId:e.payload.pinId??""}}}}}),shouldShowSignupModalOnFollowButtonClickMobile:v({id:"follow_button_trigger_mobile",evaluate:({mWebSignupModal:e})=>!e?.modal.isShown,getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:e.payload.isContextualFollowEnabled?"follow":"none",trigger:{attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0}}}})}),shouldShowFloatingBanner:{id:"mobile_floating_banner_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},R={desktop:L,mobile:C}},718254(e,a,t){t.d(a,{$B:()=>es,$D:()=>eG,$n:()=>b,A2:()=>et,A4:()=>h,C8:()=>ew,CV:()=>eT,Dx:()=>er,EY:()=>G,Eb:()=>ek,Fe:()=>N,G0:()=>w,Gd:()=>Z,HI:()=>eU,IP:()=>x,Ip:()=>f,J3:()=>eg,J4:()=>eA,JP:()=>A,KL:()=>j,KP:()=>en,LB:()=>eN,Ll:()=>eF,M:()=>el,Mh:()=>D,My:()=>z,Oy:()=>em,PH:()=>T,Pm:()=>eR,RD:()=>eH,Rj:()=>ec,SI:()=>V,SJ:()=>Q,Ss:()=>S,St:()=>eV,Tt:()=>eK,Uk:()=>Y,V$:()=>eM,Vi:()=>ea,Vl:()=>ed,WD:()=>L,WJ:()=>ex,XV:()=>ee,Y0:()=>eI,Yp:()=>ei,Z2:()=>eL,Z6:()=>e_,ZF:()=>m,_7:()=>O,_k:()=>eD,_q:()=>B,bw:()=>ey,cG:()=>eo,cM:()=>eb,d6:()=>F,dh:()=>C,eM:()=>ev,f8:()=>ep,fQ:()=>H,gk:()=>W,gl:()=>eC,gr:()=>P,gu:()=>eh,h4:()=>I,hq:()=>X,ib:()=>ef,is:()=>eO,j6:()=>K,jw:()=>q,kx:()=>eu,lI:()=>E,nH:()=>J,no:()=>$,oW:()=>p,oj:()=>y,op:()=>eS,pV:()=>eE,rD:()=>d,s4:()=>R,sL:()=>g,ts:()=>eP,u5:()=>u,vh:()=>eW,xD:()=>U,xS:()=>k,xU:()=>eB,xl:()=>v,yi:()=>M,zm:()=>c});var n=t(320384),o=t(182835),l=t(512581),i=t(799596),s=t(627203),r=t(693535),_=t(646844);let d="PROCESS_MOBILE_NAVIGATION_CHANGE",u="SET_UPSELL_REASON",p="UPS_EVENT_PIN_VIEW",c="UPS_EVENT_PIN_SAVE",E="UPS_EVENT_DESKTOP_MODAL_SHOW",g="UPS_EVENT_DESKTOP_MODAL_DISMISSED",m="CLICK_CLOSE_UP_CONTEXT_MENU_SAVE_BUTTON",S="CLICK_CLOSE_UP_CONTEXT_MENU_DOWNLOAD_BUTTON",h="TRIGGER_SCROLL_DOWN_UPSELL",T="CLEAR_SCROLL_DOWN_UPSELL",b="DISMISS_BOTTOM_RIGHT_BANNER",O="TRIGGER_SAVE_EDUCATION_POPOVER",I="CLEAR_SAVE_EDUCATION_POPOVER",v="TRIGGER_RELATED_PINS_GRADIENT_UPSELL",y="CLEAR_RELATED_PINS_GRADIENT_UPSELL",w="TRIGGER_REPLY_TO_SENDER_SHEET",N="CLEAR_REPLY_TO_SENDER_SHEET",A="CLICK_CLOSEUP_UPSELL",L="CLICK_CONTEXT_MENU_SAVE_BUTTON_UPSELL",C="CLICK_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",R="CLICK_FOLLOW_BUTTON_UPSELL",P="CLICK_FOLLOWING_BUTTON_UPSELL",D="CLICK_FOLLOWERS_BUTTON_UPSELL",M="CLICK_COMMENT_COMPOSER_UPSELL",f="CLICK_PIN_LINK_UPSELL",U="CLICK_RELATED_PIN_OPEN_LINK_UPSELL",G="SHOW_MOBILE_SIGNUP_MODAL",k="DISMISS_MOBILE_SIGNUP_MODAL",x="SET_MOBILE_SIGNUP_MODAL_TOP_INTEREST",F="INCREMENT_UPSELL_ELIGIBLE_NAVIGATION_COUNT",H="HIDE_UNAUTH_SHARING_MODALS",W="SHOW_UNAUTH_SHARING_MODALS",B="RESTORE_FROM_LOCAL_STORAGE",V="MAIN_PIN_IMAGE_CLICK_MOBILE",K="ON_LAND_UPSELL_MOBILE",q="SET_LEARNING_UPSELL_VISIBILITY",Y="CLICK_MOBILE_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",$="DISMISS_MOBILE_FLOATING_UPSELL",X="CLICK_FOLLOW_BUTTON_UPSELL_MOBILE",j="INCREMENT_PIN_SAVE_COUNT",z="DECREMENT_PIN_SAVE_COUNT",Q="INCREMENT_UNAUTH_CLICKTHROUGH_COUNT",Z="SET_UNAUTH_DOWNLOAD_COUNT",J="UPS_EVENT_PIN_SAVE_MOBILE",ee="SET_REFERRED_APP_UPSELL_STATE",ea=e=>({type:B,payload:{upsellEligibleNavigationCount:e}}),et=e=>({type:u,payload:{upsellReason:e}}),en=(e,a,t,n,o)=>({type:p,payload:{pinId:e,seoUrl:a,componentType:t,viewParameter:n,checkExperiment:o}}),eo=(e,a)=>({type:c,payload:{pinId:e,attributionLabel:a}}),el=()=>({type:g}),ei=()=>({type:b}),es=e=>({type:E,payload:{displayProps:e}}),er=()=>({type:A}),e_=(e,a,t)=>({type:L,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:t}}),ed=(e,a)=>({type:R,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),eu=(e,a,t,n)=>({type:m,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:t,checkExperiment:n}}),ep=()=>({type:P}),ec=()=>({type:D}),eE=()=>({type:M}),eg=e=>({type:f,payload:{count:e}}),em=()=>({type:U}),eS=(e,a)=>({checkExperiment:t,sessionContext:n})=>o=>{o({type:i.GY,payload:{pageUniqueKey:e,containerPage:a,checkExperiment:t,sessionContext:n}})},eh=e=>({type:i.Dw,payload:{sessionContext:e}}),eT=e=>({type:i.PO,payload:{l1Vertical:e}}),eb=(e,a)=>({type:i._k,payload:{inviter:e,containerPage:a}}),eO=e=>({checkExperiment:a})=>t=>{t({type:i.F_,payload:{containerPage:e,checkExperiment:a}})},eI=e=>({checkExperiment:a})=>t=>{t({type:i.fI,payload:{containerPage:e,checkExperiment:a}})},ev=()=>({type:I}),ey=()=>({checkExperiment:e})=>a=>{a({type:v,payload:{checkExperiment:e}})},ew=()=>({type:y}),eN=()=>({checkExperiment:e,sessionContext:a})=>t=>{let{group:n}=e?.("ce_mweb_unauth_social_feature_education")||{};n?.startsWith("enabled_group_board")?t((({checkExperiment:e})=>a=>{a({type:O,payload:{checkExperiment:e}})})({checkExperiment:e,sessionContext:a})):n?.startsWith("enabled_reply_to_sender")&&t((({checkExperiment:e})=>a=>{a({type:w,payload:{checkExperiment:e}})})({checkExperiment:e,sessionContext:a}))},eA=()=>({type:N}),eL=e=>({type:G,payload:e}),eC=()=>({type:k}),eR=e=>({type:x,payload:{topInterest:e}}),eP=()=>({type:F}),eD=()=>({type:H}),eM=()=>({type:W}),ef=e=>({checkExperiment:a,sessionContext:t})=>(n,l)=>{n({type:d,payload:{...e,checkExperiment:a,sessionContext:t}});let i=l().upsell;(0,r.A)(i)||(0,o.PM)(`mweb.nav.upsell.show.${e.currentNavigationCount}`)},eU=e=>({checkExperiment:a,sessionContext:t})=>(i,r)=>{let d=r().upsell,{country:u,userAgent:p}=t,c=s.wz.mobile.shouldShowOnLandUpsell?.evaluate({checkExperiment:a,isUpsellEnabledGlobally:(0,l.mz)({isModalShown:d.mWebSignupModal.modal.isShown??!1,isUnauthSharingModalsShown:d.mWebSignupModal.isUnauthSharingModalsShown??!1,modalHasShown:!!d.mWebSignupModal.modalHasShown,country:u,userAgent:p}),hasSeenNavUpsell:d.mWebSignupModal.modalHasShown,location:e.location,isPaid:e.isPaid,isSocial:e.isSocial,isDirect:e.isDirect,isSEO:e.isSEO,userAgent:p,showUnauthMwebSocialDefaultModalUpsell:e.showUnauthMwebSocialDefaultModalUpsell,isSocialInAppBrowser:n.SS,session:t});c.shouldShowModal&&c.modalConfig&&((0,o.PM)("mweb.nav.upsell.show.0"),c.showUnauthMwebSocialUpsell&&(0,_.GV)("unauth.mweb.social.pin.upsell",{sampleRate:1}),i({type:K,payload:{decision:c,checkExperiment:a}}))},eG=e=>({checkExperiment:a,sessionContext:t})=>(n,l)=>{let i=l().upsell,r=!!i.appUpsells.learningUpsell?.isShown,_=s.wz.mobile.shouldShowMainPinImageNavigationalModal?.evaluate({checkExperiment:a,session:t,isUpsellEnabledGlobally:e.upsellContext.isUpsellEnabledGlobally(),isModalCurrentlyShown:e.upsellContext.isModalShown,learningUpsellScenario:e.learningUpsellScenario}),d=s.wz.mobile.shouldShowMainPinImageAppUpsell?.evaluate({learningUpsellScenario:e.learningUpsellScenario,hasConversionUpsell:!!_,isLearningAppUpsellShown:r});_?(0,o.PM)("mweb.nav.upsell.show.main_pin_image_click"):d.shouldToggleAppUpsell?d.currentlyShowing?e.trackInteraction({action:"dismiss",item:"learning-upsell"}):e.trackInteraction({action:"click",item:"learning-upsell"}):e.onImageClick(),n({type:V,payload:{conversionDecision:_,appUpsellDecision:d,checkExperiment:a,pinId:e.pinId}})},ek=({isShown:e,isDismissedByUser:a=!1})=>({type:q,payload:{isShown:e,isDismissedByUser:a}}),ex=({isDismissedByUser:e=!1}={})=>({type:$,payload:{isDismissedByUser:e}}),eF=(e,a)=>({type:X,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),eH=()=>({type:z}),eW=()=>({type:Q}),eB=e=>({type:Z,payload:{count:e}}),eV=e=>({checkExperiment:a,sessionContext:t})=>(t,n)=>{let o=n().upsell;s.wz.mobile.shouldAllowUnauthSave?.evaluate({checkExperiment:a,isPPMAndroidUnauthExperience:e.isPPMAndroidUnauthExperience,isFromUnauthContextMenu:e.isFromUnauthContextMenu,currentUnauthSaves:e.unauthSavedPinsStore.pins.length})&&!o.mWebSignupModal.modal.isShown?(e.unauthSavedPinsStore.save({id:e.pinId,nodeId:e.nodeId,imageUrl:e.getPinGifOrImageSrc({imagesUrls:e.imagesUrls,embedSrc:e.embedSrc,embedType:e.embedType,excludeOriginals:!e.isBot&&!e.isSocialBot})}),t({type:j}),e.handleShowNavFooter(t,e.forceShowNavFooter,e.isNavBarHidden,e.setForceShowNavFooter),e.successCallback&&e.successCallback()):t({type:J,payload:{attributionLabel:e.isFromUnauthContextMenu?e.attributionLabel||"click_save_button_on_closeup":"click_save_button_with_max_unauth_saves",headingType:e.isFromUnauthContextMenu?"save":"extended_save_out_of_quota",pinId:e.pinId,checkExperiment:a}})},eK=({isShown:e,appUpsellType:a,isBlocking:t})=>({type:ee,payload:{isShown:e,appUpsellType:a,isBlocking:t}})},693535(e,a,t){t.d(a,{A:()=>n});let n=e=>{let{modal:a,mWebSignupModal:t,appUpsells:n}=e;return!!(a.isShown||t.modal.isShown||n.learningUpsell?.isShown||n.iabAppUpsell?.isShown)}},511909(e,a,t){t.d(a,{O$:()=>d,Rz:()=>s,mz:()=>r,t:()=>_});var n=t(320384),o=t(906474),l=t(387663),i=t(760906);let s=e=>e?(0,i.A)(e.toUpperCase()):"OTHER",r=e=>e.isPaid?"paid":e.isInvite?"invite":e.isSocial?"social":e.isSEO?"seo":e.utmSource?`utm_${e.utmSource}`:"direct",_=e=>e&&"string"==typeof e?(0,n.by)(e)?"pinterest":(0,n.lq)(e)?"instagram":/wechat|micromessenger/i.test(e)?"wechat":(0,n.SS)(e)||/facebook|fbav|fban|tiktok|twitter|line/i.test(e)?"social":"none":"none",d=(e,a,n,i)=>{let d=e?.countryFromHostName||e?.country||"",u=e?.userAgent?.raw||("undefined"!=typeof navigator?navigator.userAgent:""),p=_(u),c=(e=>{let{isAnyTodayPage:a,isHubOrIdeaPage:n,isBoardSectionPage:o,isBoardPage:l,isCloseupPage:i,isHomePage:s,isSearchPage:r,isTopicPage:_}=t(104735),d=t(445349).A,u={pathname:e};return a(u)?"today":n(u)?"ideas":o(u)?"section":l(u)?"board":i(u)?"closeup":s(u)?"home":d(u)?"profile":r(u)?"search":_(u)?"topic":""})(i),E=(0,l.X)(),g=(0,o.A)(E,14);return{country:d,userAgent:u,referrer:e?.referrerFromHeader||e?.referrerFromCookie||"",unauthID:e?.unauthId||"",region:s(d),channel:r(a),iab:p,isIAB:"instagram"===p||"wechat"===p||"social"===p,landingPageType:c,deviceType:n,revisitationState:E,revisitationCount:g,daysSinceLastVisit:(e=>{let{ts:a}=e;if(!a||0===a)return 0;let t=new Date,n=new Date(a);return Math.max(Math.floor(Number(((t.getTime()-n.getTime())/864e5).toFixed(2))),0)})(E)}}},404712(e,a,t){t.d(a,{A:()=>s});var n=t(296540);let o=()=>()=>{},l=()=>!1,i=()=>!0,s=()=>(0,n.useSyncExternalStore)(o,l,i)},240338(e,a,t){t.d(a,{A:()=>o});var n=t(104735);function o(e,a,t=!1){return!!(0,n.isAnyIdeasPage)(a)&&e?.("lop_eoq_lever_nav_mweb",{dangerouslySkipActivation:t}).anyEnabled}},480819(e,a,t){t.d(a,{_1:()=>c,k0:()=>g});var n=t(97407),o=t(296540),l=t(301135),i=t(126439),s=t(697384),r=t(622165),_=t(693117),d=t(646844),u=t(474848);let{Provider:p,getMaybe:c}=(0,s.A)("CloseupNearDupSigsTracker"),E=({group:e,children:a})=>{(0,o.useEffect)(()=>{(0,n.A)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let t=(0,_.V2)(),s=(0,o.useRef)([]),r=(0,o.useRef)(new Set),c=(0,o.useRef)([]),E=(0,o.useRef)(new Set),g=(0,o.useRef)(null),m=(0,o.useMemo)(()=>e.includes("enabled_10")?10:e.includes("enabled_20")?20:35,[e]),S=(0,l.YQ)(()=>{e.includes("session_sync")&&(t.setItem(i.kA,s.current),t.setItem(i.Ex,c.current))},500),h=(0,o.useCallback)(()=>{if(!e.includes("session_sync"))return;let a=Date.now(),n=t.getItem(i.kA),o=t.getItem(i.Ex);if(n)try{Array.isArray(n)&&n.every(e=>"string"==typeof e)&&(s.current=n.slice(-5),r.current=new Set(s.current))}catch(e){(0,d.GV)("closeup_page.near_dup.session_storage_sync.closeup.fail",{sampleRate:1})}if(o)try{Array.isArray(o)&&o.every(e=>"string"==typeof e)&&(c.current=o.slice(-m),E.current=new Set(c.current))}catch(e){(0,d.GV)("closeup_page.near_dup.session_storage_sync.impression.fail",{sampleRate:1})}(0,d.N9)("closeup_page.near_dup.session_storage_sync.success",Date.now()-a,{sampleRate:.1,tags:{status:"success"}})},[s,c,t,e,m]),T=(0,o.useCallback)(e=>{if(E.current.has(e)&&(c.current=c.current.filter(a=>a!==e)),c.current.length>=m){let e=c.current.shift();e&&E.current.delete(e)}E.current.add(e),c.current.push(e)},[m]),b=(0,o.useCallback)(e=>{if(r.current.has(e)&&(s.current=s.current.filter(a=>a!==e)),s.current.length>=5){let e=s.current.shift();e&&r.current.delete(e)}r.current.add(e),s.current.push(e),S()},[S]),O=(0,o.useCallback)(e=>{if(g.current===e)return[];let a=Date.now();0===s.current.length&&0===c.current.length&&h();let t=Array.from(new Set([...c.current,...s.current]));return g.current=e,(0,d.N9)("closeup_page.near_dup.get_tracked_sigs.success",Date.now()-a,{sampleRate:.1,tags:{status:"success"}}),t},[h]);(0,o.useEffect)(()=>S,[S]);let I=(0,o.useMemo)(()=>({addImpression:T,addCloseup:b,getTrackedNearDupSigs:O}),[T,b,O]);return(0,u.jsx)(p,{value:I,children:a})},g=({children:e})=>{(0,o.useEffect)(()=>{(0,n.A)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let{checkExperiment:a}=(0,r.A)(),{anyEnabled:t,group:l}=a("web_closeup_rabbit_hole_dedup");return!t||!l||l.includes("pwt")?(0,u.jsx)(p,{value:void 0,children:e}):(0,u.jsx)(E,{group:l,children:e})}},407242(e,a,t){t.d(a,{J0:()=>u,Yj:()=>d,aR:()=>p,xI:()=>r});var n=t(622165),o=t(534955),l=t(568677),i=t(646844);let s=({checkExperiment:e})=>{let{group:a}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,t)=>(0,i.GV)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:a,...t}})}},r=()=>{let{isAuthenticated:e}=(0,o._8)(),a=(0,l.qJ)(),{checkExperiment:t}=(0,n.A)();return e&&!a?s({checkExperiment:t}):{logStat:()=>{}}},_=0,d=({checkExperiment:e,isAuthMweb:a})=>{if(!a)return;let{logStat:t}=s({checkExperiment:e});(_+=1)<10&&t(`repin_${_}`)};function u({checkExperiment:e,isDesktop:a,isAuthenticated:t}){if(!t)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1};if(a){let{anyEnabled:a}=e("auth_dweb_graphql_pin_page");return{isGraphQLEnabledForRelatedPins:a,isGraphQLEnabledInGeneral:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}{let{anyEnabled:a,group:t}=e("auth_mweb_graphql_pin_page");switch(t){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled_prefetch_story_pin_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!0};case"enabled_prefetch_closeup_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!0,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};default:return{isGraphQLEnabledInGeneral:a,isGraphQLEnabledForRelatedPins:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}}}function p(){let{checkExperiment:e}=(0,n.A)(),a=(0,l.qJ)(),{isAuthenticated:t}=(0,o._8)();return u({checkExperiment:e,isDesktop:a,isAuthenticated:t})}},192102(e,a,t){t.d(a,{F:()=>i,K:()=>l});var n=t(104735),o=t(646844);let l=()=>!1,i=e=>{(0,n.isDiscoverArticlePage)(e)&&!l()&&(0,o.GV)("mobile_signup_modal.rules.suppress_for_discover_article",{flushImmediate:!0,sampleRate:1})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/76803-9d6fa1f1246f34f5.mjs.map